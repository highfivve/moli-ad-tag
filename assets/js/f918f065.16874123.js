"use strict";(self.webpackChunkthe_publisher_ad_tag=self.webpackChunkthe_publisher_ad_tag||[]).push([[3250],{8979:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>l});var d=i(5893),r=i(1151);const s={title:"Prebid"},t=void 0,a={id:"features/prebid",title:"Prebid",description:"The moli ad tag library natively integrates with prebid.js.",source:"@site/docs/features/prebid.md",sourceDirName:"features",slug:"/features/prebid",permalink:"/moli-ad-tag/docs/features/prebid",draft:!1,unlisted:!1,editUrl:"https://github.com/highfivve/moli-ad-tag/docs/features/prebid.md",tags:[],version:"current",frontMatter:{title:"Prebid"},sidebar:"docs",previous:{title:"Size Config",permalink:"/moli-ad-tag/docs/features/size-config"},next:{title:"Amazon TAM",permalink:"/moli-ad-tag/docs/features/tam"}},o={},l=[{value:"Enable prebid",id:"enable-prebid",level:2},{value:"Configuration properties",id:"configuration-properties",level:3},{value:"Example",id:"example",level:3},{value:"Sizes &amp; Labels",id:"sizes--labels",level:2},{value:"Consent behaviour",id:"consent-behaviour",level:2},{value:"Ad Slot",id:"ad-slot",level:2},{value:"Example: single ad unit",id:"example-single-ad-unit",level:3},{value:"Example: Twin ad units",id:"example-twin-ad-units",level:3},{value:"Example: Dynamic ad unit",id:"example-dynamic-ad-unit",level:3}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.p,{children:["The moli ad tag library natively integrates with ",(0,d.jsx)(n.a,{href:"https://docs.prebid.org/prebid/prebidjs.html",children:"prebid.js"}),"."]}),"\n",(0,d.jsx)(n.h2,{id:"enable-prebid",children:"Enable prebid"}),"\n",(0,d.jsxs)(n.p,{children:["You enable prebid by setting a ",(0,d.jsx)(n.a,{href:"../api/interfaces/Moli.headerbidding.PrebidConfig",children:"PrebidConfig"})," in your\nad tag ",(0,d.jsx)(n.a,{href:"../api/interfaces/Moli.MoliConfig",children:"MoliConfig"}),". The library will take of setting the configuration\nfor prebid."]}),"\n",(0,d.jsx)(n.h3,{id:"configuration-properties",children:"Configuration properties"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"prebid"})," config object contains configurations from pbjs and moli itself."]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"bidderSettings"})," - set the ",(0,d.jsx)(n.a,{href:"https://docs.prebid.org/dev-docs/publisher-api-reference/bidderSettings.html",children:(0,d.jsx)(n.code,{children:"pbjs.bidderSettings"})})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"config"})," - will be set via ",(0,d.jsx)(n.a,{href:"https://docs.prebid.org/dev-docs/publisher-api-reference/setConfig.html",children:(0,d.jsx)(n.code,{children:"pbjs.setConfig()"})})]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["See a full list of properties in the ",(0,d.jsx)(n.a,{href:"../api/interfaces/Moli.headerbidding.PrebidConfig",children:"PrebidConfig API doc"})]}),"\n",(0,d.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,d.jsx)(n.p,{children:"This is a small config with some parameters configured"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"{\n  slots: [ /* ... */],\n  prebid: {\n    // the full prebid config which is set via pbjs.setConfig()\n    config: {\n      bidderTimeout: 1000,\n      consentManagement: {\n        timeout: 500,\n        allowAuctionWithoutConsent: true\n      },\n      floors: {\n        enforcement: {\n          enforceJS: false\n        }\n      },\n      userSync: {\n        userIds: [ ]\n      },\n      currency: {\n        adServerCurrency: 'EUR'\n      }\n    }\n  }\n}\n"})}),"\n",(0,d.jsx)(n.h2,{id:"sizes--labels",children:"Sizes & Labels"}),"\n",(0,d.jsxs)(n.p,{children:["The ad tag filters the sizes provider in ",(0,d.jsx)(n.code,{children:"mediaType.banner.sizes"})," and ",(0,d.jsx)(n.code,{children:"mediaType.video.playerSize"})," based on\nthe given ",(0,d.jsx)(n.code,{children:"sizeConfigs"}),"."]}),"\n",(0,d.jsxs)(n.p,{children:["Labels can be used in a ",(0,d.jsx)(n.code,{children:"bid"})," object like in prebid to filter a bid based on available labels"]}),"\n",(0,d.jsx)(n.h2,{id:"consent-behaviour",children:"Consent behaviour"}),"\n",(0,d.jsxs)(n.p,{children:["Prebid won't be called before the consent state is ready. The ",(0,d.jsx)(n.code,{children:"cmpTimeout"})," setting has no effect."]}),"\n",(0,d.jsx)(n.h2,{id:"ad-slot",children:"Ad Slot"}),"\n",(0,d.jsxs)(n.p,{children:["You enable prebid for a single ad slot by setting the ",(0,d.jsx)(n.a,{href:"../api/interfaces/Moli.AdSlot#prebid",children:(0,d.jsx)(n.code,{children:"prebid"})})," property.\nThe value is a ",(0,d.jsx)(n.a,{href:"../api/namespaces/Moli.headerbidding#prebidadslotconfigprovider",children:(0,d.jsx)(n.code,{children:"PrebidAdSlotConfigProvider"})}),", which can be\neither a static value or function that allows more dynamic behaviour."]}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.a,{href:"../api/namespaces/Moli.headerbidding#prebidadslotconfigprovider",children:(0,d.jsx)(n.code,{children:"PrebidAdSlotConfigProvider"})})," returns a single or an array\nof ",(0,d.jsxs)(n.a,{href:"../api/interfaces/Moli.headerbidding.PrebidAdSlotConfig",children:[(0,d.jsx)(n.code,{children:"PrebidAdSlotConfig"})," objects"]}),". They provide an ",(0,d.jsx)(n.a,{href:"../api/interfaces/prebidjs.IAdUnit",children:"prebidjs.IAdUnit"}),"\nthat hosts a standard ",(0,d.jsx)(n.a,{href:"https://docs.prebid.org/dev-docs/adunit-reference.html",children:"prebidjs ad unit"}),"."]}),"\n",(0,d.jsx)(n.h3,{id:"example-single-ad-unit",children:"Example: single ad unit"}),"\n",(0,d.jsx)(n.p,{children:"This is a standard ad slot with a single prebid bid object"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"{\n  position: 'in-page',\n  domId: 'content_1',\n  behaviour: { loaded: 'eager' },\n  adUnitPath: '/123,456/content_1',\n  sizes: [[300, 250], [728, 90], 'fluid'],\n  // highlight-start\n  prebid: {\n    adUnit: {\n      mediaTypes: {\n        banner: {\n          sizes: [[300,250], [728, 90]]\n        }\n      },\n      bids: [\n        { bidder: 'criteo' , params: { networkId: 123, publisherSubId: 'content_1' }}\n      ]\n    }\n  },\n  // highlight-end\n  sizeConfig: [\n    {\n      mediaQuery: '(man-width: 767px)',\n      sizesSupported: [[300, 250], 'fluid']\n    },\n    {\n      mediaQuery: '(min-width: 768px)',\n      sizesSupported: [[728,90], 'fluid']\n    }\n  ]\n}\n"})}),"\n",(0,d.jsx)(n.h3,{id:"example-twin-ad-units",children:"Example: Twin ad units"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.a,{href:"https://docs.prebid.org/dev-docs/adunit-reference.html#twin-adunit-codes",children:"Twin ad units"})," are supported.\nThe ",(0,d.jsx)(n.code,{children:"prebid"})," property may return an array of ad units."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"{\n  position: 'in-page',\n  domId: 'content_1',\n  behaviour: { loaded: 'eager' },\n  adUnitPath: '/123,456/content_1',\n  sizes: [[300, 250], [728, 90], 'fluid'],\n  // highlight-start\n  prebid: [\n    {\n      adUnit: {\n        mediaTypes: {\n          banner: { sizes: [[300,250], [728, 90]]}\n        },\n        bids: [{ bidder: 'criteo' , params: { networkId: 123, publisherSubId: 'content_1' }}]\n      }\n    },\n    {\n      adUnit: {\n        mediaTypes: {\n          video: { /* video settings */}\n        },\n        bids: [{ bidder: 'video-bidder' , params: { placementId: 'content_1' }}]\n      }\n    }\n  ],\n  // highlight-end\n  sizeConfig: [\n    {\n      mediaQuery: '(man-width: 767px)',\n      sizesSupported: [[300, 250], 'fluid']\n    },\n    {\n      mediaQuery: '(min-width: 768px)',\n      sizesSupported: [[728,90], 'fluid']\n    }\n  ]\n}\n"})}),"\n",(0,d.jsx)(n.h3,{id:"example-dynamic-ad-unit",children:"Example: Dynamic ad unit"}),"\n",(0,d.jsxs)(n.p,{children:["Sometimes you want to do something before creating prebid ad unit objects.\nThe receives a ",(0,d.jsx)(n.a,{href:"../api/interfaces/Moli.headerbidding.PrebidAdSlotContext",children:(0,d.jsx)(n.code,{children:"PrebidAdSlotContext"})}),", which grants access\nto ad slot specific properties."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"{\n  position: 'in-page',\n  domId: 'content_1',\n  behaviour: { loaded: 'eager' },\n  adUnitPath: '/123,456/content_1',\n  sizes: [[300, 250], [728, 90], 'fluid'],\n  // highlight-start\n  prebid: context => ({\n  // highlight-end\n    adUnit: {\n      mediaTypes: {\n        banner: {\n          sizes: [[300,250], [728, 90]]\n        }\n      },\n      bids: [\n        {\n          bidder: 'appNexus' ,\n          params: {\n            placmenentId: 123,\n            // highlight-start\n            keywords: { iab1: context.keyValues.iab1 ?? 'none'}\n            // highlight-end\n          }\n        }\n      ]\n    }\n  }),\n  sizeConfig: [\n    {\n      mediaQuery: '(man-width: 767px)',\n      sizesSupported: [[300, 250], 'fluid']\n    },\n    {\n      mediaQuery: '(min-width: 768px)',\n      sizesSupported: [[728,90], 'fluid']\n    }\n  ]\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(c,{...e})}):c(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>a,a:()=>t});var d=i(7294);const r={},s=d.createContext(r);function t(e){const n=d.useContext(s);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),d.createElement(s.Provider,{value:n},e.children)}}}]);