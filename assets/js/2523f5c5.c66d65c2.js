"use strict";(self.webpackChunkthe_publisher_ad_tag=self.webpackChunkthe_publisher_ad_tag||[]).push([[1704],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>g});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var d=n.createContext({}),p=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(d.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},s=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,d=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),s=p(a),g=i,m=s["".concat(d,".").concat(g)]||s[g]||c[g]||r;return a?n.createElement(m,l(l({ref:t},u),{},{components:a})):n.createElement(m,l({ref:t},u))}));function g(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,l=new Array(r);l[0]=s;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var p=2;p<r;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}s.displayName="MDXCreateElement"},5378:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var n=a(7462),i=(a(7294),a(3905));const r={id:"adtag-build",title:"Build your ad tag"},l=void 0,o={unversionedId:"getting-started/adtag-build",id:"getting-started/adtag-build",title:"Build your ad tag",description:"The ad tag is the javascript bundle that takes care of your ad setup.",source:"@site/docs/getting-started/adtag-build.md",sourceDirName:"getting-started",slug:"/getting-started/adtag-build",permalink:"/moli-ad-tag/docs/getting-started/adtag-build",draft:!1,editUrl:"https://github.com/highfivve/moli-ad-tag/docs/getting-started/adtag-build.md",tags:[],version:"current",frontMatter:{id:"adtag-build",title:"Build your ad tag"},sidebar:"docs",previous:{title:"Quick start",permalink:"/moli-ad-tag/docs/getting-started/quick-start"},next:{title:"Ad Slots",permalink:"/moli-ad-tag/docs/getting-started/ad-slot-configuration"}},d={},p=[{value:"Replace the unconfigured ad tag",id:"replace-the-unconfigured-ad-tag",level:2},{value:"Sample project",id:"sample-project",level:2},{value:"Prebid integration",id:"prebid-integration",level:2},{value:"Inlined",id:"inlined",level:3},{value:"Separate webpack build",id:"separate-webpack-build",level:3},{value:"Separate project",id:"separate-project",level:3},{value:"Best practices",id:"best-practices",level:2},{value:"Immutable ad tags",id:"immutable-ad-tags",level:3},{value:"Build ES5 and ES6 bundles",id:"build-es5-and-es6-bundles",level:3}],u={toc:p};function c(e){let{components:t,...a}=e;return(0,i.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"The ad tag is the javascript bundle that takes care of your ad setup.\nYou can split and optimize as you like, but for this getting started we build one\nbig bundle that contains everything."),(0,i.kt)("h2",{id:"replace-the-unconfigured-ad-tag"},"Replace the unconfigured ad tag"),(0,i.kt)("p",null,"Your ",(0,i.kt)("inlineCode",{parentName:"p"},"index.html")," contains a pre built ad tag that has no configuration."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<script async="async" src="https://highfivve.github.io/moli-ad-tag/assets/js/latest.js"><\/script>\n')),(0,i.kt)("p",null,"The configuration is inlined on the page:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"// setup the command queue\nwindow.moli = window.moli || {que: []};\n\n// push callbacks into the queue\nwindow.moli.que.push(function(adTag) {\n    // on the fly configuration\n    adTag.configure({\n        environment: 'test',\n        slots: [ /* ... */ ]\n    });\n});\n")),(0,i.kt)("p",null,"We highly recommend adding the configuration into the ad tag and use typescript to\ncheck for compilation errors."),(0,i.kt)("p",null,"How to setup an ad tag then? It's a javascript bundle that you can build with the tools\nyou like. ",(0,i.kt)("inlineCode",{parentName:"p"},"yarn")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"npm")," as dependency management. ",(0,i.kt)("inlineCode",{parentName:"p"},"wepback")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"parcel")," for minification.\nFor this tutorial we'll use ",(0,i.kt)("inlineCode",{parentName:"p"},"yarn")," and webpack`."),(0,i.kt)("h2",{id:"sample-project"},"Sample project"),(0,i.kt)("admonition",{title:"TODO",type:"important"},(0,i.kt)("p",{parentName:"admonition"},"link example projects")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"yarn init\nyarn add @highfivve/ad-tag\n")),(0,i.kt)("admonition",{title:"TODO",type:"important"},(0,i.kt)("p",{parentName:"admonition"},"add webpack config")),(0,i.kt)("h2",{id:"prebid-integration"},"Prebid integration"),(0,i.kt)("h3",{id:"inlined"},"Inlined"),(0,i.kt)("admonition",{title:"TODO",type:"important"}),(0,i.kt)("h3",{id:"separate-webpack-build"},"Separate webpack build"),(0,i.kt)("admonition",{title:"TODO",type:"important"}),(0,i.kt)("h3",{id:"separate-project"},"Separate project"),(0,i.kt)("h2",{id:"best-practices"},"Best practices"),(0,i.kt)("p",null,"We have found a few things that worked really well for us."),(0,i.kt)("h3",{id:"immutable-ad-tags"},"Immutable ad tags"),(0,i.kt)("p",null,"We highly recommend to version your ad tag builds and always deploy a new bundle.\nThis is a little bit more effort, but comes with some nice benefits"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"You can easily roll back"),(0,i.kt)("li",{parentName:"ol"},"You can cache the ad tag forever"),(0,i.kt)("li",{parentName:"ol"},"You can a/b test different bundles"),(0,i.kt)("li",{parentName:"ol"},"You can rollout incrementally")),(0,i.kt)("h3",{id:"build-es5-and-es6-bundles"},"Build ES5 and ES6 bundles"),(0,i.kt)("admonition",{title:"TODO",type:"important"}))}c.isMDXComponent=!0}}]);