"use strict";(self.webpackChunkthe_publisher_ad_tag=self.webpackChunkthe_publisher_ad_tag||[]).push([[3796],{6178:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"modules/lazy-load","title":"lazy-load","description":"Moli\'s own Lazy Reload solution to lazy loading specific ad slot.","source":"@site/docs/modules/lazy-load.md","sourceDirName":"modules","slug":"/modules/lazy-load","permalink":"/moli-ad-tag/docs/modules/lazy-load","draft":false,"unlisted":false,"editUrl":"https://github.com/highfivve/moli-ad-tag/docs/modules/lazy-load.md","tags":[],"version":"current","frontMatter":{},"sidebar":"Modules","previous":{"title":"Modules","permalink":"/moli-ad-tag/docs/modules/"},"next":{"title":"prebid-first-party-data","permalink":"/moli-ad-tag/docs/modules/prebid-first-party-data"}}');var i=s(4848),t=s(8453);const l={},d="lazy-load",r={},a=[{value:"Integration",id:"integration",level:2},{value:"Multiple infinite slots",id:"multiple-infinite-slots",level:2},{value:"Type Aliases",id:"type-aliases",level:2},{value:"LazyLoadWindow",id:"lazyloadwindow",level:3},{value:"Type declaration",id:"type-declaration",level:4},{value:"IntersectionObserver()",id:"intersectionobserver",level:5},{value:"Parameters",id:"parameters",level:6},{value:"Returns",id:"returns",level:6},{value:"IntersectionObserver.prototype",id:"intersectionobserverprototype",level:5},{value:"See",id:"see",level:4},{value:"Functions",id:"functions",level:2},{value:"createLazyLoad()",id:"createlazyload",level:3},{value:"Returns",id:"returns-1",level:4}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"lazy-load",children:"lazy-load"})}),"\n",(0,i.jsx)(n.p,{children:"Moli's own Lazy Reload solution to lazy loading specific ad slot."}),"\n",(0,i.jsx)(n.p,{children:"This module allows us to configure some slots with lazy loading behaviour, thus refresh adSlot only\nwhen the adSlot is intersected (seen) on the viewport."}),"\n",(0,i.jsx)(n.h2,{id:"integration",children:"Integration"}),"\n",(0,i.jsxs)(n.p,{children:["In your ",(0,i.jsx)(n.code,{children:"index.ts"})," import the lazy-load module and register it."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"import { LazyLoad } from '@highfivve/module-moli-lazy-load';\n\nmoli.registerModule(new LazyLoad({\n  // Provide an array of domIds that should have lazy-loading behaviour,\n  // and assign desired options to each group of domIds if required.\n\n  slots: [\n    { domIds: ['lazy-loading-adslot-1', 'lazy-loading-adslot-2'], options: {threshold: .5} },\n    { domIds: ['lazy-loading-adslot-3'], options: {rootMargin: '20px'} }\n  ],\n  buckets: []\n}, window));\n"})}),"\n",(0,i.jsx)(n.h2,{id:"multiple-infinite-slots",children:"Multiple infinite slots"}),"\n",(0,i.jsxs)(n.p,{children:["If you have infinite slots with different ",(0,i.jsx)(n.code,{children:"pageType"})," values, you can use this to differentiate between them.\nImage you have a"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"search_content_x"})," slot"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"result_content_x"})," slot"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["You add a ",(0,i.jsx)(n.code,{children:"data-h5-slot-dom-id"})," attribute to the infinite slot container, which will select the ad slot with this\n",(0,i.jsx)(n.code,{children:"domId"})," value from the moli slots."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'<div class="ad-infinite" data-h5-slot-dom-id="search_content_x"></div>\n'})}),"\n",(0,i.jsxs)(n.p,{children:["If the ",(0,i.jsx)(n.code,{children:"data-h5-slot-dom-id"})," is not provided, the first slot with ",(0,i.jsx)(n.code,{children:"loaded: infinite"})," will be used."]}),"\n",(0,i.jsx)(n.h2,{id:"type-aliases",children:"Type Aliases"}),"\n",(0,i.jsx)(n.h3,{id:"lazyloadwindow",children:"LazyLoadWindow"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"LazyLoadWindow"}),": ",(0,i.jsx)(n.code,{children:"Window"})," & ",(0,i.jsx)(n.code,{children:"MoliRuntime.MoliWindow"})," & ",(0,i.jsx)(n.code,{children:"object"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"To solve the Intersection Observer API typescript error"}),"\n",(0,i.jsx)(n.h4,{id:"type-declaration",children:"Type declaration"}),"\n",(0,i.jsx)(n.h5,{id:"intersectionobserver",children:"IntersectionObserver()"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"IntersectionObserver"}),": (",(0,i.jsx)(n.code,{children:"callback"}),", ",(0,i.jsx)(n.code,{children:"options"}),"?) => ",(0,i.jsx)(n.code,{children:"IntersectionObserver"})]}),"\n"]}),"\n",(0,i.jsx)(n.h6,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(n.p,{children:["\u2022 ",(0,i.jsx)(n.strong,{children:"callback"}),": ",(0,i.jsx)(n.code,{children:"IntersectionObserverCallback"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u2022 ",(0,i.jsx)(n.strong,{children:"options?"}),": ",(0,i.jsx)(n.code,{children:"IntersectionObserverInit"})]}),"\n",(0,i.jsx)(n.h6,{id:"returns",children:"Returns"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"IntersectionObserver"})}),"\n",(0,i.jsx)(n.h5,{id:"intersectionobserverprototype",children:"IntersectionObserver.prototype"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"prototype"}),": ",(0,i.jsx)(n.code,{children:"IntersectionObserver"})]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"see",children:"See"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/microsoft/TypeScript/issues/16255",children:"https://github.com/microsoft/TypeScript/issues/16255"})}),"\n",(0,i.jsx)(n.h2,{id:"functions",children:"Functions"}),"\n",(0,i.jsx)(n.h3,{id:"createlazyload",children:"createLazyLoad()"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"createLazyLoad"}),"(): ",(0,i.jsx)(n.code,{children:"IModule"})," & ",(0,i.jsx)(n.code,{children:"LazyLoadModule"})]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"returns-1",children:"Returns"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"IModule"})," & ",(0,i.jsx)(n.code,{children:"LazyLoadModule"})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var o=s(6540);const i={},t=o.createContext(i);function l(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);