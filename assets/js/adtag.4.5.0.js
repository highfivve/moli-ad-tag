(()=>{var e={2:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.a9RequestBids=t.a9ClearTargetingStep=t.a9PublisherAudiences=t.a9Configure=t.a9Init=void 0;const n=r(157),a=r(569),d=r(255),l=r(793),c=r(879);var u=c.tcfapi.responses.TCPurpose;const g=s(r(643)),p=e=>!!e.moliSlot.a9,f=e=>!e.gdprApplies||e.vendor.consents[793]&&[u.STORE_INFORMATION_ON_DEVICE,u.SELECT_BASIC_ADS,u.CREATE_PERSONALISED_ADS_PROFILE,u.SELECT_PERSONALISED_ADS,u.MEASURE_AD_PERFORMANCE,u.APPLY_MARKET_RESEARCH,u.DEVELOP_IMPROVE_PRODUCTS].every((t=>e.purpose.consents[t]));t.a9Init=(e,t)=>(0,n.mkInitStep)("a9-init",(r=>new Promise((i=>{r.window.apstag=r.window.apstag||{_Q:[],init:function(){r.window.apstag._Q.push(["i",arguments])},fetchBids:function(){r.window.apstag._Q.push(["f",arguments])},setDisplayBids:function(){},targetingKeys:function(){},dpa:function(){r.window.apstag._Q.push(["di",arguments])},rpa:function(){r.window.apstag._Q.push(["ri",arguments])},upa:function(){r.window.apstag._Q.push(["ui",arguments])}},f(r.tcData)&&t.loadScript({name:"A9",loadMethod:a.AssetLoadMethod.TAG,assetUrl:e.scriptUrl?e.scriptUrl:"//c.amazon-adsystem.com/aax2/apstag.js"}),i()})))),t.a9Configure=(e,t)=>(0,n.mkConfigureStep)("a9-configure",((r,i)=>new Promise((i=>{r.window.apstag.init({pubID:e.pubID,adServer:"googletag",bidTimeout:e.timeout,gdpr:{cmpTimeout:e.cmpTimeout},schain:{complete:1,ver:"1.0",nodes:[t.supplyChainStartNode,e.schainNode]}}),i()})))),t.a9PublisherAudiences=e=>(0,n.mkConfigureStepOnce)("a9-publisher-audiences",((t,r)=>new Promise((r=>{const i=e.publisherAudience;if(i&&i.enabled){const e={hashedRecords:[{type:"email",record:i.sha256Email}]};if(t.logger.debug("A9","Enable publisher audiences"),t.window.apstag.rpa(e),t.window.__tcfapi){let r=!0;t.window.__tcfapi("addEventListener",2,(i=>{r?r=!1:i.eventStatus===c.tcfapi.status.EventStatus.USER_ACTION_COMPLETE&&(t.logger.debug("A9","Update publisher audience token"),t.window.apstag.upa(e))}))}}r()})))),t.a9ClearTargetingStep=()=>(0,n.mkPrepareRequestAdsStep)("a9-clear-targeting",n.LOW_PRIORITY,((e,t)=>0===e.requestId?(e.logger.debug("A9","skip ad slot clearing for first pipeline run"),Promise.resolve()):new Promise((r=>{e.logger.debug("A9","clear a9 targetings"),t.forEach((({adSlot:e})=>{e.getTargetingKeys().filter((e=>"amznp"===e||"amznsz"===e||"amznbid"===e)).forEach((t=>e.clearTargeting(t)))})),r()}))));const m=(e,t,r)=>{const i=g.removeChildId(e),o=t?g.withDepth(i,t):i;return g.resolveAdUnitPath(o,r)};t.a9RequestBids=e=>(0,n.mkRequestBidsStep)("a9-fetch-bids",((t,r)=>new Promise((i=>{if(!f(t.tcData))return t.logger.debug("A9","Skip any due to missing consent"),void i();const o=t.labelConfigService.getDeviceLabel(),s=r.filter(p).filter((e=>{const r="video"===e.moliSlot.a9.mediaType,i=t.labelConfigService.filterSlot(e.moliSlot.a9),o=e.filterSupportedSizes(e.moliSlot.sizes).filter(l.SizeConfigService.isFixedSize).length>0;return i&&(r||o)})).map((({moliSlot:r,priceRule:i,filterSupportedSizes:s})=>{if("video"===r.a9.mediaType)return{slotID:r.domId,mediaType:"video"};{const n=e.supportedSizes?r.sizes.filter((t=>e.supportedSizes?.some((e=>(0,d.isSizeEqual)(e,t))))):r.sizes,a=m(r.adUnitPath,r.a9.slotNamePathDepth??e.slotNamePathDepth,{...t.config.targeting?.adUnitPathVariables,device:o});return{slotID:r.domId,slotName:a,sizes:s(n).filter(l.SizeConfigService.isFixedSize),...e.enableFloorPrices&&i?{floor:{value:Math.ceil(t.window.pbjs?.convertCurrency?100*t.window.pbjs.convertCurrency(i.floorprice,"EUR",e.floorPriceCurrency||"USD"):100*i.floorprice*1.19),currency:e.floorPriceCurrency||"USD"}}:{}}}}));t.logger.debug("A9",`Fetch '${s.length}' A9 slots: ${s.map((e=>`[slotID] ${e.slotID}`))}`),0===s.length?i():(t.reportingService.markA9fetchBids(t.requestId),t.window.apstag.fetchBids({slots:s,...t.bucket?.timeout&&{bidTimeout:t.bucket.timeout}},(e=>{t.reportingService.measureAndReportA9BidsBack(t.requestId),t.window.apstag.setDisplayBids(),i()})))}))))},157:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdPipeline=t.mkRequestBidsStep=t.mkPrepareRequestAdsStep=t.mkConfigureStepOnce=t.mkConfigureStepOncePerRequestAdsCycle=t.mkConfigureStep=t.mkInitStep=t.LOW_PRIORITY=t.HIGH_PRIORITY=void 0;const i=r(495),o=r(879),s=r(380);var n=o.tcfapi.responses.TCPurpose;t.HIGH_PRIORITY=100,t.LOW_PRIORITY=10,t.mkInitStep=(e,t)=>(Object.defineProperty(t,"name",{value:e}),t),t.mkConfigureStep=(e,t)=>(Object.defineProperty(t,"name",{value:e}),t),t.mkConfigureStepOncePerRequestAdsCycle=(e,r)=>{Object.defineProperty(r,"name",{value:e});let i=0;return(0,t.mkConfigureStep)(e,((e,t)=>i!==e.requestAdsCalls?(i=e.requestAdsCalls,r(e,t)):Promise.resolve()))},t.mkConfigureStepOnce=(e,r)=>(Object.defineProperty(r,"name",{value:e}),(0,t.mkConfigureStep)(e,((e,t)=>1===e.requestAdsCalls&&1===e.requestId?r(e,t):Promise.resolve()))),t.mkPrepareRequestAdsStep=(e,t,r)=>{const i=Object.assign(r,{priority:t});return Object.defineProperty(r,"name",{value:e}),i},t.mkRequestBidsStep=(e,t)=>(Object.defineProperty(t,"name",{value:e}),t),t.AdPipeline=class{constructor(e,t,r,i){this.config=e,this.logger=t,this.window=r,this.reportingService=i,this.init=null,this.tcData=null,this.requestId=0,this.runPrepareRequestAds=(e,t)=>{const r=new Map;return this.config.prepareRequestAds.forEach((e=>{const t=r.get(e.priority);t?t.push(e):r.set(e.priority,[e])})),Array.from(r.entries()).sort((([e],[t])=>e>t?-1:1)).reduce(((r,[i,o])=>r.then((()=>(e.logger.debug("AdPipeline",e.requestId,`run prepareRequestAds with priority ${i}`),Promise.all(o.map((r=>r(e,t)))))))),Promise.resolve(void 0))}}run(e,t,r,o){if(0===e.length)return Promise.resolve();this.requestId=this.requestId+1;const a=this.requestId;this.logger.debug("AdPipeline",`starting run with requestId ${a} on ${r}. call`,e);const d=t.consent||{};return this.tcData=this.tcData?this.tcData:(0,s.consentReady)(d,this.window,this.logger,t.environment),this.tcData.then((s=>{const d=[...t.targeting?.labels||[]];s.gdprApplies&&s.purpose.consents[n.STORE_INFORMATION_ON_DEVICE]?d.push("purpose-1"):s.gdprApplies||d.push("purpose-1");const l=new i.LabelConfigService(t.labelSizeConfig||[],d,this.window),c=o&&t.buckets?.bucket&&t.buckets.bucket[o]?t.buckets.bucket[o]:null,u={requestId:a,requestAdsCalls:r,logger:this.logger,env:t.environment||"production",config:t,labelConfigService:l,reportingService:this.reportingService,window:this.window,tcData:s,bucket:c};this.init=this.init?this.init:this.logStage("init",a).then((()=>Promise.all(this.config.init.map((e=>e(u))))));const g="rejected-no-slots-after-filtering";return this.init.then((()=>this.logStage("configure",a).then((()=>Promise.all(this.config.configure.map((t=>t(u,e)))))))).then((()=>this.logStage("defineSlots",a).then((()=>this.config.defineSlots(u,e))))).then((e=>e.length?this.logStage("prepareRequestAds",a).then((()=>this.runPrepareRequestAds(u,e))).then((()=>this.logStage("requestBids",a))).then((()=>Promise.all(this.config.requestBids.map((t=>t(u,e)))))).then((()=>this.logStage("requestAds",a))).then((()=>this.config.requestAds(u,e))):Promise.reject(g))).catch((e=>{switch(e){case g:return Promise.resolve();default:return this.logger.error("AdPipeline","running ad pipeline failed with error",e),Promise.reject(e)}}))}))}logStage(e,t){return new Promise((r=>{this.logger.debug("AdPipeline",t,`stage: ${e}`),r()}))}}},917:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AdService=void 0;const o=r(611),s=r(157),n=r(192),a=r(465),d=r(777),l=i(r(297)),c=r(404),u=r(2),g=r(257),p=r(514),f=r(974),m=r(389);class h{constructor(e,t,r){this.assetService=e,this.window=t,this.adPipelineConfig=r,this.requestAdsCalls=0,this.adPipeline=new s.AdPipeline({init:[()=>Promise.reject("AdPipeline not initialized yet")],configure:[],defineSlots:()=>Promise.resolve([]),prepareRequestAds:[],requestBids:[],requestAds:()=>Promise.resolve()},(0,o.getDefaultLogger)(),this.window,n.noopReportingService),this.initialize=(e,t)=>{const r=h.getEnvironment(e),i=e.adServer||"gam",g="gam"===i;this.logger.setLogger((0,o.getLogger)(e,this.window)),this.logger.debug("AdService",`Initializing with environment ${r} and ad server ${i}`);const b=g&&e.reporting&&e.reporting.sampleRate>0?new n.ReportingService((0,a.createPerformanceService)(this.window),e.reporting,this.logger,r,this.window):n.noopReportingService,S=g?[(0,d.gptInit)(this.assetService)]:[],v=g?[(0,d.gptConfigure)(e)]:[];g&&t&&v.push((0,d.gptDestroyAdSlots)(),(0,d.gptResetTargeting)());const A=[];g&&A.push((0,d.gptLDeviceLabelKeyValue)(),(0,d.gptConsentKeyValue)(),(0,p.passbackPrepareRequestAds)(new f.PassbackService(this.logger,this.window))),e.reporting&&A.push((0,n.reportingPrepareRequestAds)(b));const P=[];if(e.prebid&&"production"===r&&(S.push((0,c.prebidInit)()),v.push((0,c.prebidConfigure)(e.prebid,e.schain)),t&&v.push((0,c.prebidRemoveAdUnits)()),A.push((0,c.prebidPrepareRequestAds)(e.prebid)),P.push((0,c.prebidRequestBids)(e.prebid,i,e.targeting))),e.a9&&"production"===r&&g&&(S.push((0,u.a9Init)(e.a9,this.assetService)),v.push((0,u.a9Configure)(e.a9,e.schain)),v.push((0,u.a9PublisherAudiences)(e.a9)),A.push((0,u.a9ClearTargetingStep)()),P.push((0,u.a9RequestBids)(e.a9))),e.pipeline&&(S.push(...e.pipeline.initSteps),v.push(...e.pipeline.configureSteps),A.push(...e.pipeline.prepareRequestAdsSteps)),"test"===r){const e=(0,m.getDebugDelayFromLocalStorage)(this.window);e&&v.push((()=>(0,m.executeDebugDelay)(this.window,e)))}return this.adPipeline=new s.AdPipeline({init:S,configure:v,defineSlots:g?(0,d.gptDefineSlots)():(0,c.prebidDefineSlots)(),prepareRequestAds:A,requestBids:P,requestAds:g?(0,d.gptRequestAds)():(0,c.prebidRenderAds)()},this.logger,this.window,b),new Promise((t=>{(0,l.default)(this.window,(()=>{this.logger.debug("DOM","dom ready"),t(e)}))}))},this.requestAds=(e,t,r)=>{this.requestAdsCalls=this.requestAdsCalls+1,this.logger.info("AdService",`RequestAds[${this.requestAdsCalls}]`,t);try{const i=e.slots.map((e=>this.isManualSlot(e)?t.some((t=>t===e.domId))?e:null:this.isInfiniteSlot(e)?r.some((t=>t.artificialDomId===e.domId))?e:null:e)).filter(g.isNotNull).filter(this.isSlotAvailable);if(e.buckets?.enabled){const t=new Map;return i.forEach((e=>{const r=e.behaviour.bucket||"default",i=t.get(r);i?i.push(e):t.set(r,[e])})),Promise.all(Array.from(t.entries()).map((([t,r])=>(this.logger.debug("AdPipeline",`running bucket ${t}, slots:`,r),this.adPipeline.run(r,e,this.requestAdsCalls).then((()=>r)))))).then(g.flatten)}return this.adPipeline.run(i,e,this.requestAdsCalls).then((()=>i))}catch(e){return this.logger.error("AdPipeline","slot filtering failed",e),Promise.reject(e)}},this.getAdPipeline=()=>this.adPipeline,this.setLogger=e=>{this.logger.setLogger(e)},this.isManualSlot=e=>"manual"===e.behaviour.loaded,this.isInfiniteSlot=e=>"infinite"===e.behaviour.loaded,this.isSlotAvailable=e=>!!this.window.document.getElementById(e.domId)||"out-of-page-interstitial"===e.position||"out-of-page-top-anchor"===e.position||"out-of-page-bottom-anchor"===e.position,this.logger=new o.ProxyLogger((0,o.getDefaultLogger)()),r&&(this.adPipeline=new s.AdPipeline(r,this.logger,t,n.noopReportingService))}static getEnvironment(e){return e.environment||"production"}refreshAdSlots(e,t){if(0===e.length)return Promise.resolve();const r=[...t.slots.filter(this.isManualSlot).filter((t=>e.some((e=>e===t.domId)))),...t.slots.filter(this.isInfiniteSlot).filter((t=>e.some((e=>e===t.domId))))];if(e.length!==r.length){const t=e.filter((e=>!r.some((t=>t.domId===e))));this.logger.warn("AdService","Trying to refresh slots that are not available",t)}return this.logger.debug("AdService","refresh ad slots",r,t.targeting),this.adPipeline.run(r,t,this.requestAdsCalls)}refreshBucket(e,t){if(!t.buckets?.enabled)return Promise.resolve();const r=t.slots.filter(this.isManualSlot).filter((t=>t.behaviour.bucket===e));return this.logger.debug("AdService","refresh ad buckets",r,t.targeting),this.adPipeline.run(r,t,this.requestAdsCalls,e)}}t.AdService=h},643:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withDepth=t.resolveAdUnitPath=t.removeChildId=void 0,t.removeChildId=e=>{const[t,r,...i]=e.split("/"),[o,...s]=r.split(",");return 0===s.length?e:["",o,...i].join("/")},t.resolveAdUnitPath=(e,t)=>{const r=/([A-Za-z0-9\_]+)/g,i=e.match(/[^{]+(?=})/g);return t&&i?(i.forEach((e=>{if(!e.match(r))throw new SyntaxError(`invalid variable "${e}" in path`);if(!t[e])throw new ReferenceError(`path variable "${e}" is not defined`)})),e.replace(new RegExp(Object.keys(t).map((e=>`{${e}}`)).join("|"),"g"),(e=>t[e.substr(1,e.length-2)]))):e},t.withDepth=(e,t)=>e.split("/").slice(0,t+1).join("/")},380:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.consentReady=t.missingPurposeConsent=void 0;const i=r(879);var o=i.tcfapi.status.EventStatus,s=i.tcfapi.status.CmpStatus;const n=[i.tcfapi.responses.TCPurpose.STORE_INFORMATION_ON_DEVICE,i.tcfapi.responses.TCPurpose.SELECT_BASIC_ADS,i.tcfapi.responses.TCPurpose.CREATE_PERSONALISED_ADS_PROFILE,i.tcfapi.responses.TCPurpose.SELECT_PERSONALISED_ADS,i.tcfapi.responses.TCPurpose.CREATE_PERSONALISED_CONTENT_PROFILE,i.tcfapi.responses.TCPurpose.SELECT_PERSONALISED_CONTENT,i.tcfapi.responses.TCPurpose.MEASURE_AD_PERFORMANCE,i.tcfapi.responses.TCPurpose.MEASURE_CONTENT_PERFORMANCE,i.tcfapi.responses.TCPurpose.APPLY_MARKET_RESEARCH,i.tcfapi.responses.TCPurpose.DEVELOP_IMPROVE_PRODUCTS];t.missingPurposeConsent=e=>!!e.gdprApplies&&n.some((t=>!e.purpose.consents[t]&&e.purpose.legitimateInterests[t])),t.consentReady=(e,r,i,n)=>("test"===n&&i.info("gdprApplies is set to false in test mode!"),"test"===n||!1===e.enabled?Promise.resolve({gdprApplies:!1,eventStatus:o.TC_LOADED,cmpStatus:s.LOADED,cmpId:0,cmpVersion:0,tcfPolicyVersion:void 0,listenerId:null}):new Promise(((o,s)=>{if(r.__tcfapi){const n=n=>{"error"===n.cmpStatus?s(n):"useractioncomplete"!==n.eventStatus&&"tcloaded"!==n.eventStatus||(i.debug("Consent","consent ready",n),e.disableLegitimateInterest&&(0,t.missingPurposeConsent)(n)?s("user consent is missing for some purposes"):o(n),n.listenerId&&r.__tcfapi("removeEventListener",2,(()=>{}),n.listenerId))};r.__tcfapi("addEventListener",2,n)}else s("window.__tcfapi is not defined. Make sure that the stub code is inlined in the head tag")})))},777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gptRequestAds=t.gptDefineSlots=t.gptConsentKeyValue=t.gptLDeviceLabelKeyValue=t.gptConfigure=t.gptResetTargeting=t.gptDestroyAdSlots=t.gptInit=void 0;const i=r(157),o=r(793),s=r(257),n=r(569),a=r(879),d=r(249);var l=a.tcfapi.responses.TCPurpose;const c=r(643),u=(e,t)=>{const r=t?t.keyValues:{},i=t?.adManagerExcludes??[];Object.keys(r).filter((e=>!i.includes(e))).forEach((t=>{const i=r[t];i&&e.googletag.pubads().setTargeting(t,i)}))},g=e=>!e.gdprApplies||e.vendor.consents[755]&&e.purpose.consents[l.STORE_INFORMATION_ON_DEVICE]&&[l.SELECT_BASIC_ADS,l.MEASURE_AD_PERFORMANCE,l.APPLY_MARKET_RESEARCH,l.DEVELOP_IMPROVE_PRODUCTS].every((t=>e.purpose.consents[t]||e.purpose.legitimateInterests[t]));t.gptInit=e=>{let t;return(0,i.mkInitStep)("gpt-init",(r=>(t||(t=new Promise((t=>{r.logger.debug("GAM","init googletag stub"),r.window.googletag=r.window.googletag||{cmd:[]},r.window.googletag.cmd.push(t),e.loadScript({name:"gpt",loadMethod:n.AssetLoadMethod.TAG,assetUrl:g(r.tcData)?"https://securepubads.g.doubleclick.net/tag/js/gpt.js":"https://pagead2.googlesyndication.com/tag/js/gpt.js"})}))),t)))},t.gptDestroyAdSlots=()=>(0,i.mkConfigureStepOncePerRequestAdsCycle)("gpt-destroy-ad-slots",(e=>new Promise((t=>{e.logger.debug("GAM","destroy all ad slots"),e.window.googletag.destroySlots(),t()})))),t.gptResetTargeting=()=>(0,i.mkConfigureStepOncePerRequestAdsCycle)("gpt-reset-targeting",(e=>new Promise((t=>{"production"===e.env&&(e.logger.debug("GAM","reset top level targeting"),e.window.googletag.pubads().clearTargeting(),u(e.window,e.config.targeting)),t()})))),t.gptConfigure=e=>{let t;return(0,i.mkConfigureStep)("gpt-configure",((r,i)=>(t||(t=new Promise((t=>{const i=e.environment||"production";switch(r.logger.debug("GAM","configure googletag"),i){case"production":u(r.window,e.targeting),r.window.googletag.pubads().enableAsyncRendering(),r.window.googletag.pubads().disableInitialLoad(),r.window.googletag.pubads().enableSingleRequest();const i=!g(r.tcData);return r.logger.debug("GAM","use limited ads",i),r.window.googletag.pubads().setPrivacySettings({limitedAds:i}),r.window.googletag.enableServices(),void t();case"test":return r.window.googletag.enableServices(),void t()}}))),t)))},t.gptLDeviceLabelKeyValue=()=>(0,i.mkPrepareRequestAdsStep)("gpt-device-label-keyValue",i.LOW_PRIORITY,(e=>new Promise((t=>{const r=e.labelConfigService.getDeviceLabel();e.logger.debug("GAM",'adding "device_label" key-value with values',r),e.window.googletag.pubads().setTargeting("device_label",r),t()})))),t.gptConsentKeyValue=()=>(0,i.mkPrepareRequestAdsStep)("gpt-consent-keyValue",i.LOW_PRIORITY,(e=>new Promise((t=>{const r=e.tcData,i=!r.gdprApplies||[l.STORE_INFORMATION_ON_DEVICE,l.SELECT_BASIC_ADS,l.CREATE_PERSONALISED_ADS_PROFILE,l.SELECT_PERSONALISED_ADS,l.CREATE_PERSONALISED_CONTENT_PROFILE,l.SELECT_PERSONALISED_CONTENT,l.MEASURE_AD_PERFORMANCE,l.MEASURE_CONTENT_PERFORMANCE,l.APPLY_MARKET_RESEARCH,l.DEVELOP_IMPROVE_PRODUCTS].every((e=>r.purpose.consents[e]));e.window.googletag.pubads().setTargeting("consent",i?"full":"none"),t()})))),t.gptDefineSlots=()=>(e,t)=>{const r=t.map((t=>{const r=new o.SizeConfigService(t.sizeConfig,e.labelConfigService.getSupportedLabels(),e.window),i=r.filterSupportedSizes;if(!r.filterSlot(t)||!e.labelConfigService.filterSlot(t))return Promise.resolve(null);const s=i(t.sizes),n=e.labelConfigService.getDeviceLabel(),a={...e.config.targeting?.adUnitPathVariables,device:n},d=(0,c.resolveAdUnitPath)(t.adUnitPath,a),l=e.window.googletag.pubads().getSlots().find((e=>e.getSlotElementId()===t.domId))||(()=>{const r=(()=>{switch(t.position){case"in-page":return e.window.googletag.defineSlot(d,s,t.domId);case"out-of-page":return e.window.googletag.defineOutOfPageSlot(d,t.domId);case"out-of-page-interstitial":return e.logger.debug("GAM",`defined web interstitial for ${d}`),e.window.googletag.defineOutOfPageSlot(d,e.window.googletag.enums.OutOfPageFormat.INTERSTITIAL);case"out-of-page-bottom-anchor":return e.logger.debug("GAM",`defined bottom anchor for ${d}`),e.window.googletag.defineOutOfPageSlot(d,e.window.googletag.enums.OutOfPageFormat.BOTTOM_ANCHOR);case"out-of-page-top-anchor":return e.logger.debug("GAM",`defined top anchor for ${d}`),e.window.googletag.defineOutOfPageSlot(d,e.window.googletag.enums.OutOfPageFormat.TOP_ANCHOR)}})();return r&&e.window.googletag.display(r),r})();if(!l){if("out-of-page-interstitial"===t.position||"out-of-page-top-anchor"===t.position||"out-of-page-bottom-anchor"===t.position)return e.logger.warn("GAM",`${t.position} is not supported`),Promise.resolve(null);{const r=`Slot: [DomID] ${t.domId} [AdUnitPath] ${t.adUnitPath} is already defined. You may have called requestAds() multiple times`;return e.logger.error("GAM",r),Promise.reject(new Error(r))}}switch(l.setCollapseEmptyDiv(!1!==t.gpt?.collapseEmptyDiv),e.env){case"production":return l.addService(e.window.googletag.pubads()),e.logger.debug("GAM",`Register slot: [DomID] ${t.domId} [AdUnitPath] ${t.adUnitPath}`),Promise.resolve({moliSlot:t,adSlot:l,filterSupportedSizes:i});case"test":return Promise.resolve({moliSlot:t,adSlot:l,filterSupportedSizes:i});default:return Promise.reject(`invalid environment: ${e.config.environment}`)}}));return Promise.all(r).then((e=>e.filter(s.isNotNull)))},t.gptRequestAds=()=>(e,t)=>new Promise((r=>{switch(e.logger.debug("GAM","requestAds"),e.env){case"test":(0,d.createTestSlots)(e,t);break;case"production":e.window.googletag.pubads().refresh(t.map((e=>e.adSlot))),t.forEach((({moliSlot:t})=>e.reportingService.markRefreshed(t)));const r=t.map((({moliSlot:e})=>`[DomID] ${e.domId} [AdUnitPath] ${e.adUnitPath}`)).join("\n");e.logger.debug("GAM",`Refresh ${t.length} slot(s):\n${r}`)}r()}))},495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelConfigService=void 0;const i=r(257);t.LabelConfigService=class{constructor(e,t,r){this.labelSizeConfig=e,this.extraLabels=t,this.window=r;const o=e.filter((e=>r.matchMedia(e.mediaQuery).matches));this.isValid=0===e.length||!(e.length>0&&0===o.length);const s=(0,i.flatten)(o.map((e=>e.labelsSupported)));this.supportedLabels=[...s,...t].filter(i.uniquePrimitiveFilter)}filterSlot(e){let t=!0;return this.supportedLabels.length&&e.labelAll?.length&&(t=e.labelAll.every((e=>this.supportedLabels.indexOf(e)>-1))),this.supportedLabels.length&&e.labelAny&&!e.labelAll?.length&&(t=e.labelAny.some((e=>this.supportedLabels.indexOf(e)>-1))),t}getSupportedLabels(){return this.supportedLabels}getDeviceLabel(){return this.getSupportedLabels().indexOf("desktop")>-1?"desktop":"mobile"}}},414:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createMoliTag=void 0;const n=r(30),a=r(569),d=r(611),l=r(783),c=r(76),u=r(917),g=r(141),p=r(598),f=s(r(643));t.createMoliTag=e=>{const t=(0,a.createAssetLoaderService)(e),r=new u.AdService(t,e),i=e;let o={state:"configurable",initialize:!1,isSinglePageApp:!1,keyValues:{},labels:[],modules:[],moduleMeta:[],reporting:{reporters:[]},refreshSlots:[],refreshInfiniteSlots:[],hooks:{beforeRequestAds:[],afterRequestAds:[]},adUnitPathVariables:{}};function s(t,r){switch(o.state){case"configurable":o.keyValues[t]=r;break;case"configured":o.config.targeting?o.config.targeting.keyValues[t]=r:o.config={...o.config,targeting:{keyValues:{[t]:r},adManagerExcludes:[]}};break;case"spa-finished":case"spa-requestAds":o.keyValues={[t]:r,...o.keyValues};break;default:(0,d.getLogger)(o.config,e).error("MoliGlobal",`Setting key-value after configuration: ${t} : ${r}`)}}function m(){switch(o.state){case"configurable":return o.initialize=!0,h(),Promise.resolve(o);case"configured":{h();const{moduleMeta:i,isSinglePageApp:s,refreshSlots:n,refreshInfiniteSlots:a}=o;let c=o.config;a.length>0&&a.forEach((t=>{c=(0,l.addNewInfiniteSlotToConfig)(c,t.idOfConfiguredSlot,t.artificialDomId,e)})),o.modules.forEach((i=>{(0,d.getLogger)(c,e).debug("MoliGlobal",`initialize ${i.moduleType} module ${i.name}`,i.config()),i.init(c,t,r.getAdPipeline)})),o.hooks&&o.hooks.beforeRequestAds&&o.hooks.beforeRequestAds.forEach((e=>e(c)));const u=o.hooks.afterRequestAds;if(s){const t=r.initialize(c,s).then((()=>c)),l={state:"spa-requestAds",configFromAdTag:o.configFromAdTag,config:c,initialized:t,href:e.location.href,labels:[],keyValues:{},adUnitPathVariables:{},hooks:o.hooks,refreshSlots:[],refreshInfiniteSlots:[],moduleMeta:i};return o=l,t.then((()=>r.requestAds(c,n,a))).then((()=>{if("spa-requestAds"===o.state&&o.href===e.location.href){r.refreshAdSlots(o.refreshSlots,o.config),u.forEach((e=>e("spa-finished")));const e={...o,state:"spa-finished",refreshSlots:[]};return o=e,e}return"spa-finished"===o.state||"spa-requestAds"===o.state?((0,d.getLogger)(o.config,e).debug("MoliGlobal","A previous requestAds() was slower than the following requestAds() call"),o):Promise.reject(`reached invalid state [${o.state}]`)}))}return o={state:"requestAds",config:c,moduleMeta:i},r.initialize(c,s).then((e=>r.requestAds(e,n,a))).then((()=>(o={state:"finished",config:c,moduleMeta:i},u.forEach((e=>e("finished"))),Promise.resolve(o)))).catch((t=>((0,d.getLogger)(c,e).error("MoliGlobal",t),o={state:"error",config:c,error:t,moduleMeta:i},u.forEach((e=>e("error"))),Promise.resolve(o))))}case"spa-requestAds":case"spa-finished":{"spa-requestAds"===o.state&&(0,d.getLogger)(o.config,e).debug("MoliGlobal","requestAds is being called while the previous requestAds() hasn't finished yet"),h();const{hooks:t,moduleMeta:i}=o,s=o.hooks.afterRequestAds,n=o.hooks.beforeRequestAds,a=o,{initialized:l,href:c,keyValues:u,labels:g,configFromAdTag:p}=o,f="spa-finished"===o.state?o.refreshSlots:[],m="spa-finished"===o.state?o.refreshInfiniteSlots:[];return o={...a,state:"spa-requestAds",refreshSlots:[]},l.then((t=>c===e.location.href?Promise.reject("You are trying to refresh ads on the same page, which is not allowed."):Promise.resolve(t))).then((e=>({...e,targeting:{keyValues:{...p.targeting&&p.targeting.keyValues?p.targeting.keyValues:{},...u},labels:[...p.targeting&&p.targeting.labels?p.targeting.labels:[],...g],adUnitPathVariables:a.adUnitPathVariables,adManagerExcludes:p.targeting?p.targeting.adManagerExcludes:[]}}))).then((e=>(n.forEach((t=>t(e))),r.requestAds(e,f,m).then((()=>e))))).then((n=>("spa-requestAds"===o.state&&r.refreshAdSlots(o.refreshSlots,n),o={state:"spa-finished",configFromAdTag:p,config:n,initialized:l,href:e.location.href,hooks:t,labels:[],keyValues:{},adUnitPathVariables:{},refreshSlots:[],refreshInfiniteSlots:[],moduleMeta:i},s.forEach((e=>e("spa-finished"))),o)))}case"requestAds":return(0,d.getLogger)(o.config,e).error("MoliGlobal","Trying to requestAds twice. Already requesting ads."),Promise.reject();case"finished":return(0,d.getLogger)(o.config,e).error("MoliGlobal","Trying to requestAds twice. Already finished."),Promise.reject();case"error":return(0,d.getLogger)(o.config,e).error("MoliGlobal","Trying to requestAds twice. Already finished, but with an error.",o.error),Promise.reject()}}function h(){const t="ABtest",r=(0,n.parseQueryString)(e.location.search).get(t);s(t,(r?Number(r):Math.floor(100*Math.random())+1).toString())}return{que:{push(e){e(i.moli)}},version:p.packageJson.version,setTargeting:s,addLabel:function(t){switch(o.state){case"configurable":o.labels.push(t);break;case"configured":o.config.targeting?.labels?o.config.targeting.labels.push(t):o.config={...o.config,targeting:{keyValues:o.config.targeting?o.config.targeting.keyValues:{},adManagerExcludes:o.config.targeting?o.config.targeting.adManagerExcludes:[],labels:[t]}};break;case"spa-requestAds":case"spa-finished":o.labels.push(t);break;default:(0,d.getLogger)(o.config,e).error("MoliGlobal",`Adding label after configure: ${t}`)}},setLogger:function(e){switch(o.state){case"configurable":o.logger=e;break;case"configured":o.config={...o.config,logger:e};break;default:e.error("Setting a custom logger is not allowed after configuration")}},setSampleRate:function(t){switch(o.state){case"configurable":o.reporting.sampleRate=t;break;case"configured":o.config={...o.config,reporting:{...o.config.reporting,sampleRate:t,reporters:o.config.reporting?o.config.reporting.reporters:[]}};break;default:(0,d.getLogger)(o.config,e).error("MoliGlobal","Trying to setSampleRate. Already configured.",o.config)}},setAdUnitPathVariables:function(t){switch(o.state){case"configurable":o.adUnitPathVariables=t;break;case"configured":o.config={...o.config,targeting:{keyValues:o.config.targeting?o.config.targeting.keyValues:{},labels:o.config.targeting?.labels?o.config.targeting.labels:[],adUnitPathVariables:t,adManagerExcludes:o.config.targeting?o.config.targeting.adManagerExcludes:[]}};break;case"spa-requestAds":case"spa-finished":o.adUnitPathVariables=t;break;default:(0,d.getLogger)(o.config,e).error("MoliGlobal",`Setting unit path variables after configuration: ${t}`)}},resolveAdUnitPath:function(e,t){const r=(t||{}).removeNetworkChildId||!1,i=f.resolveAdUnitPath(e,function(){switch(o.state){case"configurable":return o.adUnitPathVariables;case"configured":case"requestAds":case"spa-requestAds":case"spa-finished":case"finished":case"error":return o.config.targeting?.adUnitPathVariables}}());return r?f.removeChildId(i):i},addReporter:function(t){switch(o.state){case"configurable":o.reporting.reporters.push(t);break;case"configured":o.config={...o.config,reporting:{...o.config.reporting,sampleRate:o.config.reporting?o.config.reporting.sampleRate:0,reporters:[...o.config.reporting?o.config.reporting.reporters:[],t]}};break;default:(0,d.getLogger)(o.config,e).error("MoliGlobal","Trying to setSampleRate. Already configured.",o.config)}},beforeRequestAds:function(t){switch(o.state){case"configurable":case"configured":o.hooks.beforeRequestAds.push(t);break;default:(0,d.getLogger)(o.config,e).error("MoliGlobal","Trying to add a hook beforeRequestAds. Already configured.",o.config)}},afterRequestAds:function(t){switch(o.state){case"configurable":case"configured":o.hooks.afterRequestAds.push(t);break;default:(0,d.getLogger)(o.config,e).error("MoliGlobal","Trying to add a hook afterRequestAds. Already configured.",o.config)}},getConfig:function(){switch(o.state){case"configurable":return null;case"configured":case"requestAds":return o.config;case"spa-requestAds":case"spa-finished":case"finished":case"error":return o.config}},registerModule:function(t){switch(o.state){case"configurable":return o.modules.push(t),void o.moduleMeta.push((0,c.metaFromModule)(t));default:(0,d.getLogger)(o.config,e).error("Registering a module is only allowed within the ad tag before the ad tag is configured")}},configure:function(t){switch(o.state){case"configurable":{const r=o.initialize,i=(0,g.getActiveEnvironmentOverride)(e),s=o.modules;"queryParam"===i?.source&&(0,g.setEnvironmentOverrideInStorage)(i.environment,e.sessionStorage),o={state:"configured",configFromAdTag:t,config:{...t,...i&&{environment:i.environment},targeting:{keyValues:{...t.targeting&&t.targeting.keyValues?t.targeting.keyValues:{},...o.keyValues},labels:[...t.targeting&&t.targeting.labels?t.targeting.labels:[],...o.labels],adUnitPathVariables:o.adUnitPathVariables,adManagerExcludes:t.targeting?t.targeting.adManagerExcludes:[]},reporting:{...t.reporting,sampleRate:o.reporting.sampleRate?o.reporting.sampleRate:t.reporting&&t.reporting.sampleRate?t.reporting.sampleRate:0,reporters:[...t.reporting?t.reporting.reporters:[],...o.reporting.reporters]},logger:o.logger||t.logger},modules:s,moduleMeta:s.map(c.metaFromModule),hooks:o.hooks,isSinglePageApp:o.isSinglePageApp,refreshSlots:[...o.refreshSlots],refreshInfiniteSlots:[...o.refreshInfiniteSlots]},r&&m();break}case"configured":(0,d.getLogger)(o.config,e).error("MoliGlobal","Trying to configure moli tag twice. Already configured.",o.config);break;case"requestAds":(0,d.getLogger)(o.config,e).error("MoliGlobal","Trying to configure moli tag twice. Already requesting ads.");break;case"finished":(0,d.getLogger)(o.config,e).error("MoliGlobal","Trying to configure moli tag twice. Already finished.");break;case"error":(0,d.getLogger)(o.config,e).error("MoliGlobal","Trying to configure moli tag twice. Already finished, but with an error.",o.error)}},enableSinglePageApp:function(){switch(o.state){case"configurable":case"configured":o.isSinglePageApp=!0;break;case"spa-requestAds":case"spa-finished":break;default:(0,d.getLogger)(o.config,e).error("MoliGlobal","Trying enable single page app. Already configured.",o.config)}},requestAds:m,refreshAdSlot:function(t){const i="string"==typeof t?[t]:t;switch(o.state){case"configurable":case"configured":case"spa-requestAds":return o.refreshSlots.push(...i),Promise.resolve("queued");case"spa-finished":return o.href===e.location.href?r.refreshAdSlots(i,o.config).then((()=>"refreshed")):(o.refreshSlots.push(...i),Promise.resolve("queued"));case"finished":case"requestAds":return r.refreshAdSlots(i,o.config).then((()=>"refreshed"));default:return(0,d.getLogger)(o.config,e).error("MoliGlobal",`refreshAdSlot is not allowed in state ${o.state}`,o.config),Promise.reject(`not allowed in state ${o.state}`)}},refreshBucket:function(t){function s(e){return e.slots.filter((e=>e.behaviour.bucket===t))?.map((e=>e.domId))}switch(o.state){case"configurable":{const e=i.moli.getConfig()?.slots.filter((e=>e.behaviour.bucket===t))?.map((e=>e.domId));return e?.length?(o.refreshSlots.push(...e),Promise.resolve("queued")):Promise.reject("no configurable domIds for buckets")}case"configured":{const e=s(o.config);return o.refreshSlots.push(...e),Promise.resolve("queued")}case"spa-requestAds":{const e=s(o.config);return o.refreshSlots.push(...e),Promise.resolve("queued")}case"spa-finished":if(o.href===e.location.href)return r.refreshBucket(t,o.config).then((()=>"refreshed"));{const e=s(o.config);return o.refreshSlots.push(...e),Promise.resolve("queued")}case"finished":case"requestAds":return r.refreshBucket(t,o.config).then((()=>"refreshed"));default:return(0,d.getLogger)(o.config,e).error("MoliGlobal",`refreshAdSlot is not allowed in state ${o.state}`,o.config),Promise.reject(`not allowed in state ${o.state}`)}return Promise.reject("no slots in buckets found")},refreshInfiniteAdSlot:function(t,i){switch(o.state){case"configurable":case"configured":case"spa-requestAds":return o.refreshInfiniteSlots.push({artificialDomId:t,idOfConfiguredSlot:i}),Promise.resolve("queued");case"spa-finished":return o.href===e.location.href?(o={...o,config:(0,l.addNewInfiniteSlotToConfig)(o.config,i,t,e)},r.refreshAdSlots([t],o.config).then((()=>"refreshed"))):(o.refreshInfiniteSlots.push({artificialDomId:t,idOfConfiguredSlot:i}),Promise.resolve("queued"));case"finished":case"requestAds":return o={...o,config:(0,l.addNewInfiniteSlotToConfig)(o.config,i,t,e)},r.refreshAdSlots([t],o.config).then((()=>"refreshed"));default:return(0,d.getLogger)(o.config,e).error("MoliGlobal",`refreshInfiniteAdSlot is not allowed in state ${o.state}`,o.config),Promise.reject(`not allowed in state ${o.state}`)}},getModuleMeta:function(){return o.moduleMeta},getState:function(){return o.state},openConsole:function(e){switch(o.state){case"configurable":break;default:t.loadScript({assetUrl:e||"https://highfivve.github.io/moli-ad-tag/assets/js/moli-debug.min.js",loadMethod:a.AssetLoadMethod.TAG,name:"moli-debugger"})}},getAssetLoaderService:function(){return t}}}},542:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initAdTag=void 0;const i=r(414);t.initAdTag=e=>{const t=e,r=t.moli&&[...t.moli.que]||[],o=(0,i.createMoliTag)(e);return t.moli=o,r.forEach((e=>e(o))),o}},514:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passbackPrepareRequestAds=void 0;const i=r(157);t.passbackPrepareRequestAds=e=>(0,i.mkPrepareRequestAdsStep)("passback-prepare-slots",i.LOW_PRIORITY,((t,r)=>new Promise((i=>{r.filter((e=>e.moliSlot.passbackSupport)).forEach((r=>{t.logger.debug("passback","add passback support for slot",r.moliSlot.domId),e.addAdSlot(r)})),i()}))))},974:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PassbackService=void 0,t.PassbackService=class{constructor(e,t){this.logger=e,this.window=t,this.isInitialized=!1,this.adSlots={},this.passbackKeyValue="passback",this.passbackOriginKeyValue="passbackOrigin",this.findAdSlot=e=>e.adUnitPath?this.adSlots[e.adUnitPath]:e.domId?this.adSlots[e.domId]:void 0}addAdSlot(e){this.isInitialized||(this.isInitialized=!0,this.initMessageListener()),this.adSlots[e.moliSlot.domId]=e,this.adSlots[e.moliSlot.adUnitPath]=e}initMessageListener(){this.logger.debug("Passback Service","Add message listener"),this.window.addEventListener("message",(e=>{const t=this.parseMessageData(e.data);if(!t)return;this.logger.debug("Passback Service","Received passback message",t);const r=this.findAdSlot(t);r&&(this.logger.debug("Passback Service","Process passback for ad slot"),r.adSlot.setTargeting(this.passbackKeyValue,"true"),r.adSlot.setTargeting(this.passbackOriginKeyValue,t.passbackOrigin),this.window.googletag.pubads().refresh([r.adSlot]),delete this.adSlots[r.moliSlot.domId],delete this.adSlots[r.moliSlot.adUnitPath])}))}parseMessageData(e){if("string"==typeof e)try{const t=JSON.parse(e);return"passback"===t.type&&t.passbackOrigin&&(t.domId||t.adUnitPath)?t:null}catch(e){return null}return null}}},198:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderPrebidOutstream=t.prebidOutstreamRenderer=void 0;const i=r(611);t.prebidOutstreamRenderer=(e,r={})=>({url:"https://assets.h5v.eu/prebid-outstream/3/bundle.js",render:i=>(0,t.renderPrebidOutstream)(i,e,r),backupOnly:!0}),t.renderPrebidOutstream=(e,t,r={})=>{e.renderer?e.renderer.push((()=>window.outstreamPlayer?.(e,t,r))):(0,i.getDefaultLogger)().error("Can not initialize prebid outstream player, because bid.renderer is not defined")}},192:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noopReportingService=t.ReportingService=t.reportingPrepareRequestAds=void 0;const i=r(157);t.reportingPrepareRequestAds=e=>(0,i.mkPrepareRequestAdsStep)("reporting-enabled",i.HIGH_PRIORITY,((t,r)=>(1===t.requestId&&(t.logger.debug("Reporting","initialize reporting",r),e.initialize(r.map((e=>e.moliSlot)))),Promise.resolve())));class o{constructor(e,t,r,i,o){this.performanceService=e,this.config=t,this.logger=r,this.env=i,this.window=o,this.slotRenderEndedEvent={},this.adUnitRegex=t.adUnitRegex||/\/\d*\//i;try{this.pageRequestId=this.uuidv4(),this.isSample=Math.random()<=t.sampleRate,r.debug("AdPerformanceService",`isSample ${this.isSample} (${t.sampleRate}) | pageRequestId ${this.pageRequestId}`)}catch(e){this.pageRequestId="00000000-0000-0000-0000-000000000000",this.isSample=!1,r.error("[ReportingService] Initializing failed",e)}}static getSingleMeasurementMetricMeasureName(e){switch(e){case"cmpLoad":return"cmp_load_time";case"dfpLoad":return"dfp_load_time";case"prebidLoad":return"prebid_load_time";case"a9Load":return"a9_load_time";case"ttfa":return"dfp_time_to_first_ad";case"ttfr":return"dfp_time_to_first_render"}}initialize(e){this.performanceService.mark("dfp_load_start"),this.measureAndReportFirstAdRenderTime(),this.measureAndReportFirstAdLoadTime(),this.initAdSlotMetrics()}markRefreshed(e){this.performanceService.mark(`${this.minimalAdUnitName(e.adUnitPath)}_refreshed`)}markPrebidSlotsRequested(e){this.performanceService.mark(`prebid_requested_${e}`)}measureAndReportPrebidBidsBack(e){const t=o.getSingleMeasurementMetricMeasureName("prebidLoad");this.performanceService.measure(`${t}_${e}`,`prebid_requested_${e}`,`prebid_bids_back_${e}`),1===e&&this.performanceService.measure(t,`prebid_requested_${e}`,`prebid_bids_back_${e}`);const r=this.performanceService.getMeasure(`${t}_${e}`);r&&this.report({type:"prebidLoad",pageRequestId:this.pageRequestId,measurement:r})}markA9fetchBids(e){this.performanceService.mark(`a9_requested_${e}`)}measureAndReportA9BidsBack(e){const t=o.getSingleMeasurementMetricMeasureName("a9Load");this.performanceService.measure(`${t}_${e}`,`a9_requested_${e}`,`a9_bids_back_${e}`);const r=this.performanceService.getMeasure(`${t}_${e}`);1===e&&this.performanceService.measure(t,`a9_requested_${e}`,`a9_bids_back_${e}`),r&&this.report({type:"a9Load",pageRequestId:this.pageRequestId,measurement:r})}markCmpInitialization(){this.performanceService.mark("cmp_load_start")}measureCmpLoadTime(){const e=o.getSingleMeasurementMetricMeasureName("cmpLoad");this.performanceService.mark("cmp_load_end"),this.performanceService.measure(e,"cmp_load_start","cmp_load_end");const t=this.performanceService.getMeasure(e);t&&this.report({type:"cmpLoad",pageRequestId:this.pageRequestId,measurement:t})}shouldTrack(){return this.isSample}report(e){this.shouldTrack()&&this.config.reporters.forEach((t=>t(e)))}measureAndReportFirstAdRenderTime(){switch(this.env){case"production":new Promise((e=>{let t=!1;this.window.googletag.pubads().addEventListener("slotRenderEnded",(()=>{t||(e(),t=!0)}))})).then((()=>{const e=o.getSingleMeasurementMetricMeasureName("ttfr");this.performanceService.measure(e,"dfp_load_start","dfp_time_to_first_render_end");const t=this.performanceService.getMeasure(e);t&&this.report({type:"ttfr",pageRequestId:this.pageRequestId,measurement:t})}));break;case"test":this.logger.warn("ReportingService","In test environment no time-to-first-render will be reported")}}measureAndReportFirstAdLoadTime(){switch(this.env){case"production":new Promise((e=>{let t=!1;this.window.googletag.pubads().addEventListener("slotOnload",(()=>{t||(e(),t=!0)}))})).then((()=>{const e=o.getSingleMeasurementMetricMeasureName("ttfa");this.performanceService.measure(e,"dfp_load_start","dfp_time_to_first_ad_end");const t=this.performanceService.getMeasure(e);t&&this.report({type:"ttfa",pageRequestId:this.pageRequestId,measurement:t})}));break;case"test":this.logger.warn("In test environment no time-to-first-loads will be reported")}}initAdSlotMetrics(){this.window.googletag.pubads().addEventListener("slotRenderEnded",(e=>{const t=this.minimalAdUnitName(e.slot.getAdUnitPath());this.performanceService.measure(`${t}_rendered`,"dfp_load_start",`${t}_rendered`),this.slotRenderEndedEvent[e.slot.getSlotElementId()]=e})),this.window.googletag.pubads().addEventListener("slotOnload",(e=>{const t=this.minimalAdUnitName(e.slot.getAdUnitPath());this.performanceService.mark(`${t}_content_loaded`),this.performanceService.measure(`${t}_render_content_loaded`,`${t}_rendered`,`${t}_content_loaded`),this.performanceService.measure(`${t}_content_loaded_total`,"dfp_load_start",`${t}_content_loaded`);const r=this.slotRenderEndedEvent[e.slot.getSlotElementId()],i=this.performanceService.getMeasure(`${t}_rendered`),o=this.performanceService.getMeasure(`${t}_render_content_loaded`),s=this.performanceService.getMeasure(`${t}_content_loaded_total`),n=this.performanceService.getMark(`${t}_refreshed`);if(!(s&&o&&i&&n&&r))return;delete this.slotRenderEndedEvent[e.slot.getSlotElementId()];const a={type:"adSlot",pageRequestId:this.pageRequestId,adUnitName:t,advertiserId:r.advertiserId,campaignId:r.campaignId,lineItemId:r.lineItemId||r.sourceAgnosticLineItemId,refresh:n,rendered:i,rendering:o,loaded:s};this.report(a)}))}minimalAdUnitName(e){return e.replace(this.adUnitRegex,"")}reportAdSlotsMetric(e){const t={type:"adSlots",numberAdSlots:e.length,numberEmptyAdSlots:e.filter((e=>e.isEmpty)).length};return this.report(t),e}uuidv4(){return"crypto"in this.window&&"getRandomValues"in this.window.crypto?([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^this.window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}}t.ReportingService=o,t.noopReportingService={initialize:()=>{},markRefreshed:()=>{},markPrebidSlotsRequested:()=>{},measureAndReportPrebidBidsBack:()=>{},markA9fetchBids:()=>{},measureAndReportA9BidsBack:()=>{},markCmpInitialization:()=>{},measureCmpLoadTime:()=>{}}},793:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeConfigService=void 0;const i=r(257),o=r(255);t.SizeConfigService=class{constructor(e,t,r){this.sizeConfig=e,this.supportedLabels=t,this.window=r,this.filterSupportedSizes=e=>this.isValid?0===this.supportedSizes.length?e:this.supportedSizes.filter((t=>e.some((e=>"fluid"===t?"fluid"===e:"fluid"!==e&&(0,o.isSizeEqual)(e,t))))):[],this.areLabelsMatching=(e,t)=>(!e.labelAll||e.labelAll.every((e=>t.some((t=>t===e)))))&&(!e.labelNone||!e.labelNone.some((e=>t.some((t=>t===e)))));const s=0!==e.length?e.filter((e=>r.matchMedia(e.mediaQuery).matches&&this.areLabelsMatching(e,t))):[];this.isValid=0===e.length||!(e.length>0&&0===s.length),this.supportedSizes=(0,i.flatten)(s.map((e=>e.sizesSupported))).map((e=>JSON.stringify(e))).filter(i.uniquePrimitiveFilter).map((e=>JSON.parse(e)))}static isFixedSize(e){return"fluid"!==e}filterSlot(e){return!e.sizes||0===e.sizes.length||this.filterSupportedSizes(e.sizes).length>0}}},598:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.packageJson=void 0,t.packageJson={version:"4.5.0"}},885:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(95),t),o(r(193),t),o(r(76),t),o(r(81),t),o(r(955),t),o(r(879),t),o(r(39),t),o(r(542),t),o(r(414),t),o(r(157),t),o(r(643),t),o(r(198),t),o(r(569),t),o(r(257),t),o(r(713),t),o(r(611),t),o(r(329),t)},95:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},193:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.googletag=void 0,function(e){let t;!function(e){let t;!function(e){e[e.TOP_ANCHOR=2]="TOP_ANCHOR",e[e.BOTTOM_ANCHOR=3]="BOTTOM_ANCHOR",e[e.REWARDED=4]="REWARDED",e[e.INTERSTITIAL=5]="INTERSTITIAL"}(t=e.OutOfPageFormat||(e.OutOfPageFormat={}))}(t=e.enums||(e.enums={}))}(t.googletag||(t.googletag={}))},76:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.metaFromModule=void 0,t.metaFromModule=e=>({moduleType:e.moduleType,name:e.name,description:e.description,config:e.config()})},81:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},955:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.prebidjs=void 0,(r=t.prebidjs||(t.prebidjs={})).Adagio="adagio",r.AdaptMx="amx",r.Adform="adf",r.AdUp="aduptech",r.Criteo="criteo",r.AppNexusAst="appnexusAst",r.AppNexus="appnexus",r.EmxDigital="emx_digital",r.ImproveDigital="improvedigital",r.IndexExchange="ix",r.Invibes="invibes",r.NanoInteractive="nanointeractive",r.JustPremium="justpremium",r.PubMatic="pubmatic",r.Ogury="ogury",r.OpenX="openx",r.SmartAdServer="smartadserver",r.Smartx="smartx",r.Unruly="unruly",r.Teads="teads",r.Triplelift="triplelift",r.Yieldlab="yieldlab",r.Spotx="spotx",r.ShowHeroes="showheroesBs",r.StroeerCore="stroeerCore",r.Xaxis="xhb",r.DSPX="dspx",r.Rubicon="rubicon",r.Recognified="rads",r.Visx="visx",r.Vlyby="vlyby",r.Orbidder="orbidder",r.JustPremiumPushUpBillboard="pu",r.JustPremiumPushDownBillboard="pd",r.JustPremiumLeaderboard="as",r.JustPremiumFloorAd="fa",r.JustPremiumClassicFloorAd="cf",r.JustPremiumSideAd="sa",r.JustPremiumWallpaper="wp",r.JustPremiumMobileScroller="is",r.JustPremiumMobileSkin="mt",r.JustPremiumCascadeAd="ca",r.JustPremiumVideoWallpaper="wv",r.JustPremiumVideoFloorAd="fv",r.JustPremiumMobileStickyExpandable="ms",r.JustPremiumMobileVideo="mv"},39:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},879:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tcfapi=void 0,function(e){let t,r;!function(e){let t,r;!function(e){e[e.STORE_INFORMATION_ON_DEVICE=1]="STORE_INFORMATION_ON_DEVICE",e[e.SELECT_BASIC_ADS=2]="SELECT_BASIC_ADS",e[e.CREATE_PERSONALISED_ADS_PROFILE=3]="CREATE_PERSONALISED_ADS_PROFILE",e[e.SELECT_PERSONALISED_ADS=4]="SELECT_PERSONALISED_ADS",e[e.CREATE_PERSONALISED_CONTENT_PROFILE=5]="CREATE_PERSONALISED_CONTENT_PROFILE",e[e.SELECT_PERSONALISED_CONTENT=6]="SELECT_PERSONALISED_CONTENT",e[e.MEASURE_AD_PERFORMANCE=7]="MEASURE_AD_PERFORMANCE",e[e.MEASURE_CONTENT_PERFORMANCE=8]="MEASURE_CONTENT_PERFORMANCE",e[e.APPLY_MARKET_RESEARCH=9]="APPLY_MARKET_RESEARCH",e[e.DEVELOP_IMPROVE_PRODUCTS=10]="DEVELOP_IMPROVE_PRODUCTS"}(t=e.TCPurpose||(e.TCPurpose={})),function(e){e[e.NOT_ALLOWED=0]="NOT_ALLOWED",e[e.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",e[e.REQUIRE_LI=2]="REQUIRE_LI"}(r=e.RestrictionType||(e.RestrictionType={}))}(t=e.responses||(e.responses={})),function(e){let t,r,i;!function(e){e.VISIBLE="visible",e.HIDDEN="hidden",e.DISABLED="disabled"}(t=e.DisplayStatus||(e.DisplayStatus={})),function(e){e.STUB="stub",e.LOADING="loading",e.LOADED="loaded",e.ERROR="error"}(r=e.CmpStatus||(e.CmpStatus={})),function(e){e.TC_LOADED="tcloaded",e.CMP_UI_SHOWN="cmpuishown",e.USER_ACTION_COMPLETE="useractioncomplete"}(i=e.EventStatus||(e.EventStatus={}))}(r=e.status||(e.status={}))}(t.tcfapi||(t.tcfapi={}))},783:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addNewInfiniteSlotToConfig=void 0;const i=r(611);t.addNewInfiniteSlotToConfig=(e,t,r,o)=>{const s=e.slots.find((e=>e.domId===t));if(s){const t={...s,domId:r};return{...e,slots:[...e.slots,t]}}return(0,i.getLogger)(e,o).error("MoliGlobal","no infinite ad slot configured!",e),e}},257:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNotNull=t.uniquePrimitiveFilter=t.flatten=void 0,t.flatten=function(e){return e.reduce(((e,t)=>e.concat(t)),[])},t.uniquePrimitiveFilter=function(e,t,r){return r.indexOf(e)===t},t.isNotNull=function(e){return null!=e}},569:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createAssetLoaderService=t.AssetLoaderService=t.AssetLoadMethod=void 0;const o=i(r(297)),s=r(465);var n;!function(e){e[e.FETCH=0]="FETCH",e[e.TAG=1]="TAG"}(n=t.AssetLoadMethod||(t.AssetLoadMethod={}));class a{constructor(e,t){this.performanceService=e,this.window=t}loadScript(e,t=this.window.document.head){return this.awaitDomReady().then((()=>this.startPerformance(e.name))).then((()=>{switch(e.loadMethod){case n.FETCH:return this.loadAssetViaFetch(e,t);case n.TAG:return this.loadAssetViaTag(e,t)}})).then((()=>this.measurePerformance(e.name)))}loadJson(e,t){return this.startPerformance(e),this.window.fetch(t,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then((t=>(this.measurePerformance(e),t.ok?t.json():t.text().then((e=>Promise.reject(`${t.statusText}: ${e}`)))))).catch((t=>(this.measurePerformance(e),Promise.reject(t))))}loadAssetViaFetch(e,t){return this.window.fetch(e.assetUrl).then((e=>e.ok?Promise.resolve(e):Promise.reject(e))).then((e=>e.text())).then((e=>this.scriptTagWithBody(e))).then((e=>t.appendChild(e)))}scriptTagWithBody(e){const t=this.window.document.createElement("script");return t.type="text/javascript",t.async=!0,t.text=e,t}loadAssetViaTag(e,t){const r=this.scriptTagWithSrc(e.assetUrl);return new Promise(((e,i)=>{r.onload=e,r.onerror=i,t.appendChild(r)}))}scriptTagWithSrc(e){const t=this.window.document.createElement("script");return t.type="text/javascript",t.async=!0,t.src=e,t}awaitDomReady(){return new Promise((e=>{(0,o.default)(this.window,e)}))}startPerformance(e){this.performanceService.mark(`${e}_load_start`)}measurePerformance(e){this.performanceService.mark(`${e}_load_stop`),this.performanceService.measure(`${e}_load_time`,`${e}_load_start`,`${e}_load_stop`)}}t.AssetLoaderService=a,t.createAssetLoaderService=e=>new a((0,s.createPerformanceService)(e),e)},818:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserStorageKeys=void 0,t.BrowserStorageKeys={moliEnv:"moli-env",testSlotSize:e=>`moli-test-slot-size-${e}`,debugDelay:"moli-debug-delay"}},389:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDebugDelayToLocalStorage=t.getDebugDelayFromLocalStorage=t.executeDebugDelay=void 0;const i=r(818),o=r(463);t.executeDebugDelay=(e,t)=>t?new Promise((r=>e.setTimeout(r,t))):Promise.resolve(),t.getDebugDelayFromLocalStorage=e=>Number((0,o.getBrowserStorageValue)(i.BrowserStorageKeys.debugDelay,e.localStorage))||void 0,t.setDebugDelayToLocalStorage=(e,t)=>{t?(0,o.setBrowserStorageValue)(i.BrowserStorageKeys.debugDelay,t.toString(),e.localStorage):(0,o.removeBrowserStorageValue)(i.BrowserStorageKeys.debugDelay,e.localStorage)}},297:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{let r,i=[],o="object"==typeof e.document&&e.document,s=o&&o.documentElement.doScroll,n="DOMContentLoaded",a=o&&(s?/^loaded|^c/:/^loaded|^i|^c/).test(o.readyState);!a&&o&&o.addEventListener(n,r=()=>{if(o)for(o.removeEventListener(n,r),a=!0;r=i.shift();)r()}),a?setTimeout(t,0):i.push(t)}},141:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetEnvironmentOverrides=t.setEnvironmentOverrideInStorage=t.getAllEnvironmentOverrides=t.getActiveEnvironmentOverride=void 0;const i=r(257),o=r(818),s=r(463),n=r(30),a=r(570);t.getActiveEnvironmentOverride=e=>(0,t.getAllEnvironmentOverrides)(e)[0]||void 0,t.getAllEnvironmentOverrides=e=>[{source:"queryParam",environment:(0,n.parseQueryString)(e.location.search).get(a.QueryParameters.moliEnv)},{source:"sessionStorage",environment:(0,s.getBrowserStorageValue)(o.BrowserStorageKeys.moliEnv,e.sessionStorage)},{source:"localStorage",environment:(0,s.getBrowserStorageValue)(o.BrowserStorageKeys.moliEnv,e.localStorage)}].map((({source:e,environment:t})=>t&&(e=>!!["production","test"].find((t=>t===e)))(t)?{source:e,environment:t}:void 0)).filter(i.isNotNull),t.setEnvironmentOverrideInStorage=(e,t)=>(0,s.setBrowserStorageValue)(o.BrowserStorageKeys.moliEnv,e,t),t.resetEnvironmentOverrides=e=>{(0,s.removeBrowserStorageValue)(o.BrowserStorageKeys.moliEnv,e.sessionStorage),(0,s.removeBrowserStorageValue)(o.BrowserStorageKeys.moliEnv,e.localStorage),e.location.replace((0,n.updateQueryString)(a.QueryParameters.moliEnv,void 0))}},329:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractAdTagVersion=void 0,t.extractAdTagVersion=({currentVersion:e})=>{try{switch(typeof e){case"number":return e.toFixed();case"string":const t=Number(e);return Number.isNaN(t)?void 0:t.toFixed();default:return}}catch(e){return}}},541:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractDomainFromHostname=void 0,t.extractDomainFromHostname=e=>{if(e)return e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1)}},463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeBrowserStorageValue=t.setBrowserStorageValue=t.getBrowserStorageValue=void 0;const i=r(611);t.getBrowserStorageValue=(e,t=localStorage)=>{try{return t.getItem(e)}catch(r){return(0,i.getDefaultLogger)().debug(`Could not read value with key ${e} from browser storage`,t),null}},t.setBrowserStorageValue=(e,t,r=localStorage)=>{try{r.setItem(e,t)}catch(o){(0,i.getDefaultLogger)().debug(`Could not set key ${e} with value ${t} to browser storage`,r)}},t.removeBrowserStorageValue=(e,t=localStorage)=>{try{t.removeItem(e)}catch(r){(0,i.getDefaultLogger)().debug(`Could not remove key ${e} from browser storage`,t)}}},611:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyLogger=t.getLogger=t.getDefaultLogger=void 0;const i=r(30);function o(e){return`background:${e}; color:#FFF; padding:3px; margin:3px; border-radius:5px; line-height: 15px;`}function s(e){switch(e){case"debug":return o("#49A0CC");case"info":return o("#61A172");case"warn":return o("#FFC300");case"error":return o("#C70039")}}function n(e){switch(e){case"AdPipeline":return o("#74ABC6");case"GAM":return o("#BA0E5F");case"Faktor CMP":return o("#9374C6");case"MoliGlobal":return o("#403073");case"Prebid":return o("#4357AD");case"AdVisibilityService":return o("#d5ba3c");case"UserActivityService":return o("#19ad0e");case"Adex DMP":return o("#003E74");default:return o("#052E53")}}function a(){return{debug(e,t,...r){console.debug(`%c[DEBUG]%c${e}%c${t}`,s("debug"),n(e),"",...r)},info(e,t,...r){console.info(`%c[INFO]%c${e}%c${t}`,s("info"),n(e),"",...r)},warn(e,t,...r){console.warn(`%c[WARN]%c${e}%c${t}`,s("warn"),n(e),"",...r)},error(e,t,...r){console.error(`%c[ERROR]%c${e}%c${t}`,s("error"),n(e),"",...r)}}}t.getDefaultLogger=a,t.getLogger=function(e,t){return function(e){const t=(0,i.parseQueryString)(e.location.search).get("moliDebug");return!!t&&"true"===t.toLowerCase()}(t)?a():e&&e.logger?e.logger:function(){const e=()=>{};return{debug:e,info:e,warn:e,error:console.error}}()},t.ProxyLogger=class{constructor(e){this.logger=e,this.setLogger=e=>{this.logger=e}}debug(e,...t){this.logger.debug(e,...t)}error(e,...t){this.logger.error(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}}},713:(e,t)=>{"use strict";function r(e){return"[object Object]"===toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.mergeDeep=t.isPlainObject=void 0,t.isPlainObject=r,t.mergeDeep=function e(t,...i){if(!i.length)return t;const o=i.shift();if(r(t)&&r(o))for(const i in o)r(o[i])?(t[i]||Object.assign(t,{[i]:{}}),e(t[i],o[i])):Array.isArray(o[i])?t[i]?Array.isArray(t[i])&&(t[i]=t[i].concat(o[i])):Object.assign(t,{[i]:o[i]}):Object.assign(t,{[i]:o[i]});return e(t,...i)}},465:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPerformanceService=void 0;class r{mark(e){performance.mark(e)}measure(e,t,r){this.getMark(r)||performance.mark(r),performance.measure(e,t,r)}getMeasure(e){return performance.getEntriesByName(e,"measure")[0]}getMark(e){return performance.getEntriesByName(e,"mark")[0]}}class i{mark(e){}measure(e,t,r){}getMeasure(e){}getMark(e){}}t.createPerformanceService=e=>e&&"performance"in e&&"mark"in e.performance&&"measure"in e.performance&&"getEntriesByName"in e.performance?new r:new i},30:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateQueryString=t.parseQueryString=void 0;const r=e=>{const t=e.indexOf("=");return t>=0?[decodeURIComponent(e.slice(0,t)),decodeURIComponent(e.slice(t+1))]:[decodeURIComponent(e),""]};t.parseQueryString=e=>{try{const t=e.startsWith("?")?e.slice(1):e;return t.length>0?new Map(t.split("&").filter((e=>e.length>0)).map(r)):new Map}catch(e){return console.error(e),new Map}},t.updateQueryString=(e,r,i,o)=>{i=i||[location.protocol,"//",location.host,location.pathname].join(""),o=o||window.location.search;const s=Array.from((0,t.parseQueryString)(o).set(e,r||"").entries()).filter((e=>""!==e[1])).map((([e,t])=>`${e}=${t}`)).join("&");return[i,s?"?":"",s].join("")}},570:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryParameters=void 0,t.QueryParameters={moliEnv:"moliEnv"}},382:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveStoredRequestIdInOrtb2Object=void 0,t.resolveStoredRequestIdInOrtb2Object=(e,t)=>({...e,ext:{...e.ext,prebid:{...e.ext?.prebid,storedrequest:t}}})},255:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSizeEqual=void 0,t.isSizeEqual=(e,t)=>e[0]===t[0]&&e[1]===t[1]},249:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeTestSlotSizeFromLocalStorage=t.createTestSlots=void 0;const i=r(793),o=r(257),s=r(818),n=r(463),a=e=>`${e}__container`;t.createTestSlots=(e,t)=>{const r=d(e,t);return r.forEach((({slot:e,container:t})=>{t.innerHTML="",t.appendChild(c(e))})),r},t.removeTestSlotSizeFromLocalStorage=e=>(0,n.removeBrowserStorageValue)(s.BrowserStorageKeys.testSlotSize(e.domId));const d=(e,t)=>(t.forEach((t=>{const{adSlot:r,moliSlot:i}=t,o=a(i.domId),s=document.createElement("div");s.id=o;const n=document.getElementById(i.domId);n&&n.setAttribute("data-google-query-id","test"),((e,t)=>{const r=e.getSlotElementId(),i=document.getElementById(r);i&&(i.innerHTML=t)})(r,s.outerHTML),e.logger.debug("GAM",`Set content for slot: [DomID] ${i.domId} [AdUnitPath] ${i.adUnitPath}`)})),l(t)),l=e=>e.map((e=>{const t=document.getElementById(a(e.moliSlot.domId));return t?{slot:e,container:t}:void 0})).filter(o.isNotNull),c=e=>{const t=u(e),r=g(e.moliSlot,t);if("hidden"===r)return document.createElement("div");{const i=document.createElement("div"),[o,s]=r;i.style.cssText=`\n      position: relative; display: inline-flex; flex-direction: column; align-items: center; justify-content: center;\n      width: ${o}px; height: ${s}px; padding: 6px; border: 2px dotted gray; background-color: #fff;\n      background-image: linear-gradient(90deg, transparent 79px, #abced4 79px, #abced4 81px, transparent 81px), linear-gradient(#eee .1em, transparent .1em);\n      background-size: 100% 1.2em; box-sizing: border-box;\n    `;const n=document.createElement("h4");n.innerHTML=`<strong>${e.moliSlot.domId}</strong>`,i.appendChild(n);const a=document.createElement("span");a.style.color="#656565";const d=([e,t])=>a.innerText=`(${e}x${t})`;d([o,s]),n.appendChild(a);const l=document.createElement("div");l.style.cssText="position: absolute; top: 5px; left: 5px",i.appendChild(l);const c=(t,r)=>{if("hidden"===t)i.style.display="none";else{const[e,o]=t;i.style.width=`${e}px`,i.style.height=`${o}px`,d(t),b(r)}p(e.moliSlot,t)},u="1px dotted white",g="1px solid black",f=document.createElement("button");f.innerText="hide",f.title="Once hidden, it can only be restored using the moli console (or by clearing local storage manually)",f.style.cssText=`font-size: 10px; background: #656565; color: white; width: auto important!; border: ${u};`,f.addEventListener("click",(()=>c("hidden",f)));const h=[...t.map((e=>{const[t,i]=e,o=m(r,e),s=document.createElement("button");return s.innerText=`${t}x${i}`,s.style.cssText=`font-size: 10px; background: #00a4a6; color: white; width: auto important!; border: ${o?g:u};`,s.addEventListener("click",(()=>c(e,s))),s})),f];h.forEach((e=>l.appendChild(e)));const b=e=>{h.forEach((e=>e.style.border=u)),e.style.border=g};return i}},u=e=>e.filterSupportedSizes(e.moliSlot.sizes).filter(i.SizeConfigService.isFixedSize).filter((([e,t])=>e>1&&t>1)),g=(e,t)=>{const r=f(e);if(r&&("hidden"===r||h(t,r)))return r;{const e=Math.floor(Math.random()*t.length);return 0===t.length?[300,250]:t[e]}},p=(e,t)=>(0,n.setBrowserStorageValue)(s.BrowserStorageKeys.testSlotSize(e.domId),JSON.stringify(t)),f=e=>{const t=(0,n.getBrowserStorageValue)(s.BrowserStorageKeys.testSlotSize(e.domId));if(t)try{const e=JSON.parse(t);return(e=>"hidden"===e||Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1])(e)?e:void 0}catch{return}},m=(e,t)=>{const[r,i]=e,[o,s]=t;return r===o&&i===s},h=(e,t)=>e.some((e=>m(e,t)))},270:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}},232:(e,t,r)=>{var i=r(270);e.exports=function(e){if(Array.isArray(e))return i(e)}},260:e=>{e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},557:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},359:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},182:(e,t,r)=>{var i=r(232),o=r(557),s=r(487),n=r(359);e.exports=function(e){return i(e)||o(e)||s(e)||n()}},487:(e,t,r)=>{var i=r(270);e.exports=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}},404:(e,t,r)=>{"use strict";r.r(t);var i=r(182),o=r.n(i),s=r(260),n=r.n(s);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Object.defineProperty(t,"__esModule",{value:!0}),exports.prebidRenderAds=exports.prebidDefineSlots=exports.prebidRequestBids=exports.prebidPrepareRequestAds=exports.prebidConfigure=exports.prebidRemoveAdUnits=exports.prebidInit=void 0;var l=r(157),c=r(793),u=r(643),g=r(257),p=r(541),f=r(382),m=function(e){return new Promise((function(t,r){e.window.setTimeout((function(){return r("Prebid did not resolve in time. Maybe you forgot to import the prebid distribution in the ad tag")}),5e3)}))},h=function(e){return new Promise((function(t){e.pbjs=e.pbjs||{que:[]},e.pbjs.que.push(t)}))},b=function(e){return!!e.moliSlot.prebid};exports.prebidInit=function(){return(0,l.mkInitStep)("prebid-init",(function(e){return Promise.race([h(e.window),m(e)])}))},exports.prebidRemoveAdUnits=function(){return(0,l.mkConfigureStep)("prebid-remove-adunits",(function(e){return new Promise((function(t){e.window.pbjs=e.window.pbjs||{que:[]};var r=e.window.pbjs.adUnits;r&&(e.logger.debug("Prebid","Destroying prebid adUnits",r),r.forEach((function(t){return e.window.pbjs.removeAdUnit(t.code)}))),t()}))}))},exports.prebidConfigure=function(e,t){var r,i=function(e){return{validation:"relaxed",config:{ver:"1.0",complete:1,nodes:e}}};return(0,l.mkConfigureStep)("prebid-configure",(function(o,s){return r||(r=new Promise((function(r){e.bidderSettings&&(o.window.pbjs.bidderSettings=e.bidderSettings),o.window.pbjs.setConfig(d(d(d({},e.config),{schain:i([t.supplyChainStartNode])}),{floors:e.config.floors||{}})),e.schain.nodes.forEach((function(e){var r=e.bidder,s=e.node,n=e.appendNode,a=[t.supplyChainStartNode];n&&a.push(s),o.window.pbjs.setBidderConfig({bidders:[r],config:{schain:i(a)}},!0)})),o.window.pbjs.registerSignalSources(),r()}))),r}))},exports.prebidPrepareRequestAds=function(e){return(0,l.mkPrepareRequestAdsStep)("prebid-prepare-adunits",l.LOW_PRIORITY,(function(t,r){return new Promise((function(i){var s=t.labelConfigService.getSupportedLabels(),n=t.labelConfigService.getDeviceLabel(),a=r.filter(b).map((function(r){var i=r.moliSlot,o=r.priceRule,a=r.filterSupportedSizes,l=t.config.targeting,g=l&&l.keyValues?l.keyValues:{},m=o?o.floorprice:void 0,h=o?{floors:{currency:e.config.currency.adServerCurrency,schema:{delimiter:"|",fields:["mediaType"]},values:{"*":o.floorprice}}}:null;return t.logger.debug("Prebid",t.requestId,"Price Rule",o,i.domId,h),function(e,t){if("function"==typeof t){var r=t(e);return Array.isArray(r)?r:[r]}return Array.isArray(t)?t:[t]}({keyValues:g,floorPrice:m,priceRule:o,labels:s,isMobile:"mobile"===n},i.prebid).map((function(e){var r,o,s,l,g,m,b=e.adUnit.mediaTypes.banner,v=e.adUnit.mediaTypes.video,A=e.adUnit.mediaTypes.native,P=b?a(b.sizes).filter(c.SizeConfigService.isFixedSize):[],w=v?S(v.playerSize,a):[],y=e.adUnit.bids.filter((function(e){return t.labelConfigService.filterSlot(e)})).map((function(e){return{bidder:e.bidder,params:e.params}})),_=!(w.length>0)||null!=v&&v.w||null!=v&&v.h?{}:{w:w[0][0],h:w[0][1]},E=v?{video:d(d({},v),{},{playerSize:0===w.length?void 0:w},_)}:void 0,O=b&&P.length>0?{banner:d(d({},b),{},{sizes:P})}:void 0,R=A?{native:d({},A)}:void 0,I=d(d({},e.adUnit.pubstack),{},{adUnitPath:(0,u.resolveAdUnitPath)((null===(r=e.adUnit.pubstack)||void 0===r?void 0:r.adUnitPath)||i.adUnitPath,d(d({},null===(o=t.config.targeting)||void 0===o?void 0:o.adUnitPathVariables),{},{device:n}))}),C=null===(s=e.adUnit.ortb2Imp)||void 0===s||null===(l=s.ext)||void 0===l||null===(g=l.prebid)||void 0===g?void 0:g.storedrequest,M=(0,p.extractDomainFromHostname)(t.window.location.hostname),T=C&&C.id?d(d({},C),{},{id:(0,u.resolveAdUnitPath)(C.id,d(d({},null===(m=t.config.targeting)||void 0===m?void 0:m.adUnitPathVariables),{},{device:n},M?{domain:M}:{}))}):null;return d(d(d(d({},e.adUnit),C&&T&&{ortb2Imp:(0,f.resolveStoredRequestIdInOrtb2Object)(e.adUnit.ortb2Imp,T)}),{},{code:e.adUnit.code||i.domId},e.adUnit.pubstack?{pubstack:I}:{}),{},{mediaTypes:d(d(d({},E),O),R),bids:y},h)})).filter((function(e){return e.bids.length>0&&e.mediaTypes&&(e.mediaTypes.banner||e.mediaTypes.video||e.mediaTypes.native)&&!function(e,t){return!!t.pbjs.adUnits&&t.pbjs.adUnits.some((function(t){return e.code===t.code}))}(e,t.window)}))})).reduce((function(e,t){return[].concat(o()(e),o()(t))}),[]);a.forEach((function(e){t.logger.debug("Prebid",t.requestId,"Prebid add ad unit: [Code] ".concat(e.code),e)})),t.window.pbjs.addAdUnits(a),i()}))}))},exports.prebidRequestBids=function(e,t,r){return(0,l.mkRequestBidsStep)("prebid-request-bids",(function(i,o){return new Promise((function(s){var n,a=o.filter(b).map((function(e){return e.moliSlot.domId}));if(0===a.length)return i.logger.debug("Prebid","skip request bids. All slots were filtered.",o.map((function(e){return e.moliSlot}))),s();var d=!1;i.logger.debug("Prebid","Prebid request bids: \n\t\t\t".concat(a.join("\n\t\t\t"))),i.reportingService.markPrebidSlotsRequested(i.requestId),i.window.pbjs.requestBids({adUnitCodes:a,timeout:null===(n=i.bucket)||void 0===n?void 0:n.timeout,bidsBackHandler:function(n,l,c){i.logger.info("Prebid",c,n,o.map((function(e){return e.moliSlot.domId})));try{if(d)return void i.logger.warn("Prebid","ad server request already sent [".concat(i.requestId,"]"),c,o.map((function(e){return e.moliSlot})));if(!n)return i.logger.warn("Prebid","Undefined bid response map for ad unit codes: ".concat(a.join(", "))),s();if(d=!0,i.reportingService.measureAndReportPrebidBidsBack(i.requestId),"gam"===t){if(e.listener){var u=r&&r.keyValues?r.keyValues:{},g="function"==typeof e.listener?e.listener({keyValues:u}):e.listener;if(g.preSetTargetingForGPTAsync)try{g.preSetTargetingForGPTAsync(n,l,o)}catch(e){i.logger.error("Prebid","Failed to execute prebid preSetTargetingForGPTAsync listener. ".concat(e))}}i.window.pbjs.setTargetingForGPTAsync(a)}a.forEach((function(e){var t=n[e];t?i.logger.debug("Prebid",c,"Prebid bid response: [DomID]: ".concat(e," \n\t\t\t").concat(t.bids.map((function(e){return"[bidder] ".concat(e.bidder," [width] ").concat(e.width," [height] ").concat(e.height," [cpm] ").concat(e.cpm)})))):i.logger.debug("Prebid",c,"Prebid bid response: [DomID] ".concat(e," ---\x3e no bid response"))})),s()}catch(e){i.logger.error("Prebid","DfpService:: could not resolve bidsBackHandler"+JSON.stringify(e)),s()}}})}))}))},exports.prebidDefineSlots=function(){return function(e,t){var r=t.map((function(t){var r=new c.SizeConfigService(t.sizeConfig,e.labelConfigService.getSupportedLabels(),e.window),i=r.filterSupportedSizes;if(!r.filterSlot(t)||!e.labelConfigService.filterSlot(t))return Promise.resolve(null);var o={getAdUnitPath:function(){return t.adUnitPath}};switch(e.env){case"production":case"test":return Promise.resolve({moliSlot:t,adSlot:o,filterSupportedSizes:i});default:return Promise.reject("invalid environment: ".concat(e.config.environment))}}));return Promise.all(r).then((function(e){return e.filter(g.isNotNull)}))}},exports.prebidRenderAds=function(){return function(e,t){return new Promise((function(t,r){e.logger.debug("Prebid","start rendering");try{switch(e.env){case"test":e.logger.debug("Prebid","No test slot support yet");break;case"production":e.window.pbjs.getHighestCpmBids().filter((function(e){return e&&e.adId})).forEach((function(t){var r=e.window.document.getElementById(t.adUnitCode);if(r){var i,o=document.createElement("div");o.style.setProperty("border","0pt none");var s=document.createElement("iframe");s.scrolling="no",s.frameBorder="0",s.marginHeight="0",s.marginHeight="0",s.name="prebid_ads_iframe_".concat(t.adUnitCode),s.title="3rd party ad content",s.sandbox.add("allow-forms","allow-popups","allow-popups-to-escape-sandbox","allow-same-origin","allow-scripts","allow-top-navigation-by-user-activation"),s.setAttribute("aria-label","Advertisment"),s.style.setProperty("border","0"),s.style.setProperty("margin","0"),s.style.setProperty("overflow","hidden"),o.appendChild(s),r.appendChild(o);var n=null===(i=s.contentWindow)||void 0===i?void 0:i.document;n?e.window.pbjs.renderAd(n,t.adId):e.logger.error("Prebid","No access to iframe contentWindow for ad unit".concat(t.adUnitCode))}else e.logger.error("Prebid","Could not locate ad slot with id ".concat(t.adUnitCode))}))}t()}catch(e){r(e)}}))}};var S=function(e,t){var r;return e?t((r=e,r&&2===r.length&&"number"==typeof r[0]&&"number"==typeof r[1]?[e]:e)).filter(c.SizeConfigService.isFixedSize):[]}}},t={};function r(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";(0,r(885).initAdTag)(window)})()})();