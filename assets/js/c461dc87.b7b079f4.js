"use strict";(self.webpackChunkthe_publisher_ad_tag=self.webpackChunkthe_publisher_ad_tag||[]).push([[5126],{8635:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>c,frontMatter:()=>l,metadata:()=>o,toc:()=>r});var s=i(5893),a=i(1151);const l={title:"Ad Slots"},d=void 0,o={id:"getting-started/ad-slot-configuration",title:"Ad Slots",description:"An ad slot is the most basic building block of your ad tag. It maps to a div element on the publisher page and",source:"@site/docs/getting-started/ad-slot-configuration.md",sourceDirName:"getting-started",slug:"/getting-started/ad-slot-configuration",permalink:"/moli-ad-tag/docs/getting-started/ad-slot-configuration",draft:!1,unlisted:!1,editUrl:"https://github.com/highfivve/moli-ad-tag/docs/getting-started/ad-slot-configuration.md",tags:[],version:"current",frontMatter:{title:"Ad Slots"},sidebar:"docs",previous:{title:"Build your ad tag",permalink:"/moli-ad-tag/docs/getting-started/adtag-build"},next:{title:"Glossary",permalink:"/moli-ad-tag/docs/getting-started/glossary"}},t={},r=[{value:"Minimal ad slot configuration",id:"minimal-ad-slot-configuration",level:2},{value:"Loading behaviour",id:"loading-behaviour",level:2},{value:"Eager",id:"eager",level:3},{value:"Usage",id:"usage",level:4},{value:"Manual",id:"manual",level:3},{value:"Usage",id:"usage-1",level:4},{value:"Lazy",id:"lazy",level:3},{value:"Usage",id:"usage-2",level:4},{value:"Refreshable",id:"refreshable",level:3},{value:"Usage",id:"usage-3",level:4},{value:"Size Config",id:"size-config",level:2},{value:"Labels",id:"labels",level:2},{value:"Best practices",id:"best-practices",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["An ",(0,s.jsx)(n.em,{children:"ad slot"})," is the most basic building block of your ad tag. It maps to a ",(0,s.jsx)(n.code,{children:"div"})," element on the publisher page and\nto an ",(0,s.jsxs)(n.a,{href:"https://support.google.com/admanager/topic/10478086",children:[(0,s.jsx)(n.em,{children:"ad unit"})," in Google Ad Manager"]}),". ",(0,s.jsx)(n.a,{href:"../api/interfaces/Moli.AdSlot.md",children:"A full API reference can be found here"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"The ad slot configuration contains"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"domId"})," to identify the ad slot on the page"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"adUnitPath"})," to map the ad slot to a Google Ad Manager ad unit"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"sizes"})," and ",(0,s.jsx)(n.code,{children:"sizeConfig"})," to configure the sizes that should be requested"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"position"})," for ad slot kind"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"behaviour"})," to specify when the ad slot should be loaded"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"gpt"})," for additional Google Ad Manager specific configuration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"prebid"})," for the ",(0,s.jsx)(n.a,{href:"https://docs.prebid.org/dev-docs/adunit-reference.html",children:"prebid ad unit configuration"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"a9"})," for Amazon TAM configuration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"labelAll"})," / ",(0,s.jsx)(n.code,{children:"labelAny"})," for ad slot filtering"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"minimal-ad-slot-configuration",children:"Minimal ad slot configuration"}),"\n",(0,s.jsx)(n.p,{children:"This is a minimal ad slot configuration."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { Moli } from '@highfivve/ad-tag';\n\nconst slot: Moli.AdSlot = {\n  // A div element with this ID must be present on the publisher page\n  domId: 'content_1',\n\n  // the full ad unit path in google ad manager\n  adUnitPath: '/1234/content_1',\n\n  // what sizes should be requested\n  sizes: [ [300, 250] ],\n\n  // where the ad slot should positioned. Everything else than 'in-page' is some sort\n  // of special format, like interstitials or sticky ads provided by Google Ad Manager\n  position: 'in-page',\n\n  // when the ad slot should be loaded. `eager` means as soon as the ad tag has loaded\n  behaviour: {\n    loaded: 'eager'\n  },\n\n  // configure different sizes depending on mediaQueries or labels.\n  // If empty, all sizes will be requested\n  sizeConfig: []\n};\n"})}),"\n",(0,s.jsxs)(n.p,{children:["On your page you must have a div ",(0,s.jsx)(n.code,{children:'<div id="content_1></div>'})," present when the dom is ready."]}),"\n",(0,s.jsx)(n.h2,{id:"loading-behaviour",children:"Loading behaviour"}),"\n",(0,s.jsx)(n.p,{children:"The timing when an ad slot is loaded is crucial for site performance, viewability and revenue. You can choose from\nthe following loading strategies:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"eager"})," - slot is loaded as soon as the ad tag is ready"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"lazy"})," - slot is loaded when an event is fired"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"manual"})," - slot is loaded via ad tag API"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"refreshable"})," - slot can be ",(0,s.jsx)(n.code,{children:"lazy"})," or ",(0,s.jsx)(n.code,{children:"eager"})," with the same configuration options"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"eager",children:"Eager"}),"\n",(0,s.jsx)(n.p,{children:"This should be the default for all above the fold ad slots. The ad tag starts loading these slots as soon as possible."}),"\n",(0,s.jsx)(n.h4,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"behaviour: {\n  // highlight-next-line\n  loaded: 'eager'\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"manual",children:"Manual"}),"\n",(0,s.jsxs)(n.p,{children:["The page loads these ad slots via ",(0,s.jsxs)(n.a,{href:"../api/interfaces/Moli.MoliTag.md#refreshadslot",children:["the ",(0,s.jsx)(n.code,{children:"refreshAdSlot('<dom id>')"})," API"]}),"."]}),"\n",(0,s.jsx)(n.admonition,{title:"Prefer manual over lazy and refreshable",type:"tip",children:(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"manual"})," loading behaviour works in any order and batches ad server calls if possible."]})}),"\n",(0,s.jsx)(n.h4,{id:"usage-1",children:"Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"domId: 'content_1',\nbehaviour: {\n  // highlight-next-line\n  loaded: 'manual'\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"On your page"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"window.moli = window.moli || { que: [] };\nwindow.moli.que.push((moliAdTag) => {\n  // highlight-next-line\n  moliAdTag.refreshAdSlot('content_1');\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:"Slots loaded manually come with the following properties"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"refreshAdSlot"})," can be called at any time"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"refreshAdSlot"})," calls are batched until ",(0,s.jsx)(n.code,{children:"requestAds"})," is called. This avoids unnecessary ad server calls"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Test your refresh logic!",type:"danger",children:(0,s.jsx)(n.p,{children:"Refreshing an ad slot too often or too fast is seen as ad fraud and will be punished by exchanges!"})}),"\n",(0,s.jsx)(n.h3,{id:"lazy",children:"Lazy"}),"\n",(0,s.jsx)(n.p,{children:"An event triggers the ad slot refresh. Use this if there are already dom events available that should trigger and ad\nrefresh."}),"\n",(0,s.jsx)(n.h4,{id:"usage-2",children:"Usage"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.a,{href:"../api/interfaces/Moli.behaviour.EventTrigger.md",children:(0,s.jsx)(n.code,{children:"EventTrigger"})})," configures when the ad slot should be loaded."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"behaviour: {\n  loaded: 'lazy',\n  trigger: {\n    name: 'event',\n    event: 'ad.content_1',\n    source: window\n  }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"On your page"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"window.moli = window.moli || { que: [] };\nwindow.moli.que.push((moliAdTag) => {\n  // all event listeners are now in place\n  moliAdTag.afterRequestAds(() => {\n    // sent event `ad.content_1` on `window` to trigger ad refresh\n    window.dispatchEvent(new Event('ad.content_1'));\n  });\n});\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"refreshable",children:"Refreshable"}),"\n",(0,s.jsxs)(n.p,{children:["An ad slot that can be refreshed with the same event multiple times. Use ",(0,s.jsx)(n.code,{children:"manual"})," ad slot if possible."]}),"\n",(0,s.jsx)(n.p,{children:"The common use case for this is to reload slots when the user interacts with the page and the layout changes, e.g.\nsorting a list of items."}),"\n",(0,s.jsx)(n.h4,{id:"usage-3",children:"Usage"}),"\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(n.code,{children:"lazy"})," is true the ad slot will load on the first event. This is the same behaviour as the ",(0,s.jsx)(n.code,{children:"lazy"})," loading behaviour."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"behaviour: {\n  loaded: 'refreshable',\n  // highlight-next-line\n  lazy: true,\n  trigger: {\n    name: 'event',\n    event: 'ad.content_1',\n    source: window\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(n.code,{children:"lazy"})," is false the ad slot will load as soon as possible. This is the same behaviour as the ",(0,s.jsx)(n.code,{children:"eager"})," loading behaviour."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"behaviour: {\n  loaded: 'refreshable',\n  // highlight-next-line\n  lazy: false,\n  trigger: {\n    name: 'event',\n    event: 'ad.content_1',\n    source: window\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"size-config",children:"Size Config"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"sizeConfig"})," property configures ",(0,s.jsx)(n.em,{children:"what"})," sizes the ad tag requests It is an array of ",(0,s.jsx)(n.a,{href:"../api/interfaces/Moli.SizeConfigEntry.md",children:"SizeConfig entries"}),".\nThe spec is almost identical to the ",(0,s.jsx)(n.a,{href:"https://docs.prebid.org/dev-docs/publisher-api-reference/setConfig.html#sizeConfig-How-it-Works",children:"prebid sizeConfig"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"This is what a simple configuration might look like"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"sizeConfig: [{\n  // mobile devices support 300 width at max\n  mediaQuery: '(max-width: 767px)',\n  sizesSupported: [[300,50]]\n}, {\n  // desktop supports 728px width\n  mediaQuery: '(min-width: 768px)',\n  sizesSupported: [[728,90]]\n}]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/moli-ad-tag/docs/features/size-config",children:"the responsive ads section"})," for an in detail explanation of the size config."]}),"\n",(0,s.jsx)(n.h2,{id:"labels",children:"Labels"}),"\n",(0,s.jsxs)(n.p,{children:["Each ad slot may specific either a ",(0,s.jsx)(n.code,{children:"labelAll"})," or ",(0,s.jsx)(n.code,{children:"labelAny"})," array. An ad slot is only requested if the label\nconditions are met. The ad tag follows the ",(0,s.jsx)(n.a,{href:"https://docs.prebid.org/dev-docs/publisher-api-reference/setConfig.html#labels",children:"prebid.js label spec"}),"."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["See ",(0,s.jsx)(n.a,{href:"/moli-ad-tag/docs/features/labels",children:"the labels section"})," for an in detail explanation of ",(0,s.jsx)(n.code,{children:"labelAll"})," and ",(0,s.jsx)(n.code,{children:"labelAny"})]}),"\n",(0,s.jsxs)(n.li,{children:["See ",(0,s.jsx)(n.a,{href:"/moli-ad-tag/docs/guides/conditional-ad-slots",children:"conditional ad slots"})," for a specific label use case"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best practices"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Keep your ad slot number low"}),"\n",(0,s.jsx)(n.li,{children:"Try to generate 1-1 mappings between ad slots and Google Ad Manager ad units. This makes optimizations and debugging easier"}),"\n",(0,s.jsx)(n.li,{children:"Reuse ad slots only for infinite loading streams"}),"\n",(0,s.jsx)(n.li,{children:"Think responsive - an ad slot may have different sizes on different devices, but it's still the same position"}),"\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"manual"})," loading behaviour over ",(0,s.jsx)(n.code,{children:"lazy"})," and ",(0,s.jsx)(n.code,{children:"refreshable"})," as events can only be sent if event listeners are already in place"]}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>o,a:()=>d});var s=i(7294);const a={},l=s.createContext(a);function d(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:d(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);