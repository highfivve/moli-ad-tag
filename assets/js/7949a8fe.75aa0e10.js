"use strict";(self.webpackChunkthe_publisher_ad_tag=self.webpackChunkthe_publisher_ad_tag||[]).push([[6843],{51847:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var i=n(85893),t=n(11151);const o={id:"Moli.reporting",title:"Namespace: reporting",sidebar_label:"reporting",custom_edit_url:null},s=void 0,l={id:"api/namespaces/Moli.reporting",title:"Namespace: reporting",description:"Moli.reporting",source:"@site/docs/api/namespaces/Moli.reporting.md",sourceDirName:"api/namespaces",slug:"/api/namespaces/Moli.reporting",permalink:"/moli-ad-tag/docs/api/namespaces/Moli.reporting",draft:!1,unlisted:!1,editUrl:null,tags:[],version:"current",frontMatter:{id:"Moli.reporting",title:"Namespace: reporting",sidebar_label:"reporting",custom_edit_url:null},sidebar:"API",previous:{title:"pipeline",permalink:"/moli-ad-tag/docs/api/namespaces/Moli.pipeline"},next:{title:"schain",permalink:"/moli-ad-tag/docs/api/namespaces/Moli.schain"}},d={},c=[{value:"Reporting",id:"reporting",level:2},{value:"Metrics",id:"metrics",level:2},{value:"Integration",id:"integration",level:2},{value:"Interfaces",id:"interfaces",level:2},{value:"Type Aliases",id:"type-aliases",level:2},{value:"Metric",id:"metric",level:3},{value:"MetricType",id:"metrictype",level:3},{value:"Reporter",id:"reporter",level:3},{value:"Type declaration",id:"type-declaration",level:4},{value:"Parameters",id:"parameters",level:5},{value:"Returns",id:"returns",level:5}];function a(e){const r={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.a,{href:"/moli-ad-tag/docs/api/namespaces/Moli",children:"Moli"}),".reporting"]}),"\n",(0,i.jsx)(r.h2,{id:"reporting",children:"Reporting"}),"\n",(0,i.jsx)(r.p,{children:"Moli provides extension points to add listeners for different metrics. These can\nbe used to measure performance and latency of your ad setup."}),"\n",(0,i.jsx)(r.h2,{id:"metrics",children:"Metrics"}),"\n",(0,i.jsx)(r.p,{children:"All metrics are based on the Web Performance API. If a browser doesn't support this\nAPI, no metrics will be collected."}),"\n",(0,i.jsx)(r.p,{children:"Moli provides the following metrics"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"dfpLoad"}),"    - measurement from ",(0,i.jsx)(r.code,{children:"requestAds"})," to ",(0,i.jsx)(r.code,{children:"finish"})]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"prebidLoad"})," - measurement from ",(0,i.jsx)(r.code,{children:"requestBids"})," to ",(0,i.jsx)(r.code,{children:"bidsBackHandler"})," called"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"a9Load"}),"     - measurement from ",(0,i.jsx)(r.code,{children:"fetchBids"})," to ",(0,i.jsx)(r.code,{children:"bidsBackHandler"})," called"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"ttfa"}),"       - Time-To-First-Ad measurement from ",(0,i.jsx)(r.code,{children:"requestAds"})," to the first ad slot render call"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"ttfr"}),"       - Time-To-FIrst-Render measurement from ",(0,i.jsx)(r.code,{children:"requestAds"})," to first ad slot fully rendered"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"adslot"}),"     - Contains multiple metrics for a single ad slot. See ",(0,i.jsx)(r.code,{children:"AdSlotMetric"})," for more details."]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"integration",children:"Integration"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"Example"})})}),"\n",(0,i.jsxs)(r.p,{children:["take a look ",(0,i.jsx)(r.a,{href:"#reporter",children:"the reporter type"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"reporting: {\n  // report everything\n  sampleRate: 1,\n  // a regex that splits the publisher id and `gf` from the ad unit path\n  adUnitRegex: //\\d*/gf//i,\n  // an array of reporters\n  reporters: [\n    consoleLogReporter\n  ]\n}\n"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"See"})})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"#reporter",children:"The Reporter type contains implementation examples"}),"."]}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://developer.mozilla.org/de/docs/Web/API/Performance",children:"https://developer.mozilla.org/de/docs/Web/API/Performance"})}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"interfaces",children:"Interfaces"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/moli-ad-tag/docs/api/interfaces/Moli.reporting.AdSlotMetric",children:"AdSlotMetric"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/moli-ad-tag/docs/api/interfaces/Moli.reporting.AdSlotsMetric",children:"AdSlotsMetric"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/moli-ad-tag/docs/api/interfaces/Moli.reporting.BooleanMetric",children:"BooleanMetric"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/moli-ad-tag/docs/api/interfaces/Moli.reporting.IMetric",children:"IMetric"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/moli-ad-tag/docs/api/interfaces/Moli.reporting.ReportingConfig",children:"ReportingConfig"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/moli-ad-tag/docs/api/interfaces/Moli.reporting.SingleMeasurementMetric",children:"SingleMeasurementMetric"})}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"type-aliases",children:"Type Aliases"}),"\n",(0,i.jsx)(r.h3,{id:"metric",children:"Metric"}),"\n",(0,i.jsxs)(r.p,{children:["\u01ac ",(0,i.jsx)(r.strong,{children:"Metric"}),": ",(0,i.jsx)(r.a,{href:"/moli-ad-tag/docs/api/interfaces/Moli.reporting.SingleMeasurementMetric",children:(0,i.jsx)(r.code,{children:"SingleMeasurementMetric"})})," | ",(0,i.jsx)(r.a,{href:"/moli-ad-tag/docs/api/interfaces/Moli.reporting.AdSlotMetric",children:(0,i.jsx)(r.code,{children:"AdSlotMetric"})})," | ",(0,i.jsx)(r.a,{href:"/moli-ad-tag/docs/api/interfaces/Moli.reporting.AdSlotsMetric",children:(0,i.jsx)(r.code,{children:"AdSlotsMetric"})})," | ",(0,i.jsx)(r.a,{href:"/moli-ad-tag/docs/api/interfaces/Moli.reporting.BooleanMetric",children:(0,i.jsx)(r.code,{children:"BooleanMetric"})})]}),"\n",(0,i.jsx)(r.p,{children:"Base type for all provided metrics."}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h3,{id:"metrictype",children:"MetricType"}),"\n",(0,i.jsxs)(r.p,{children:["\u01ac ",(0,i.jsx)(r.strong,{children:"MetricType"}),": ",(0,i.jsx)(r.code,{children:'"cmpLoad"'})," | ",(0,i.jsx)(r.code,{children:'"dfpLoad"'})," | ",(0,i.jsx)(r.code,{children:'"prebidLoad"'})," | ",(0,i.jsx)(r.code,{children:'"a9Load"'})," | ",(0,i.jsx)(r.code,{children:'"ttfa"'})," | ",(0,i.jsx)(r.code,{children:'"ttfr"'})," | ",(0,i.jsx)(r.code,{children:'"adSlot"'})," | ",(0,i.jsx)(r.code,{children:'"adSlots"'})]}),"\n",(0,i.jsx)(r.p,{children:"Union type for all provided metric types."}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h3,{id:"reporter",children:"Reporter"}),"\n",(0,i.jsxs)(r.p,{children:["\u01ac ",(0,i.jsx)(r.strong,{children:"Reporter"}),": (",(0,i.jsx)(r.code,{children:"metric"}),": ",(0,i.jsx)(r.a,{href:"/moli-ad-tag/docs/api/namespaces/Moli.reporting#metric",children:(0,i.jsx)(r.code,{children:"Metric"})}),") => ",(0,i.jsx)(r.code,{children:"void"})]}),"\n",(0,i.jsx)(r.p,{children:"A reporter is a simple function that receives a metric and handles it."}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"Example"})})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:"import { Moli } from 'moli-ad-tag/source/ts/types/moli';\nexport const consoleLogReporter: Moli.reporting.Reporter = (metric: Moli.reporting.Metric) => {\n\nswitch (metric.type) {\n   case 'dfpLoad': {\n     console.groupCollapsed('DFP Load Time');\n     console.log('startTime', Math.round(metric.measurement.startTime));\n     console.log('duration', metric.measurement.duration);\n     console.groupEnd();\n     break;\n   }\n   case 'prebidLoad': {\n     console.groupCollapsed('Prebid Load Time');\n     console.log('name', metric.measurement.name);\n     console.log('startTime', Math.round(metric.measurement.startTime));\n     console.log('duration', Math.round(metric.measurement.duration));\n     console.groupEnd();\n     break;\n   }\ncase 'a9Load': {\n     console.groupCollapsed('A9 Load Time');\n     console.log('name', metric.measurement.name);\n     console.log('startTime', Math.round(metric.measurement.startTime));\n     console.log('duration', Math.round(metric.measurement.duration));\n     console.groupEnd();\n     break;\n   }\n   case 'ttfa': {\n     console.groupCollapsed('Time to first Ad');\n     console.log('visible at', Math.round(metric.measurement.startTime + metric.measurement.duration));\n     console.log('startTime', Math.round(metric.measurement.startTime));\n     console.log('duration', Math.round(metric.measurement.duration));\n     console.groupEnd();\n     break;\n   }\n   case 'ttfr': {\n     console.groupCollapsed('Time to first Render');\n     console.log('rendered at', Math.round(metric.measurement.startTime + metric.measurement.duration));\n     console.log('startTime', Math.round(metric.measurement.startTime));\n     console.log('duration', Math.round(metric.measurement.duration));\n     console.groupEnd();\n     break;\n   }\n   case 'adSlots': {\n     console.groupCollapsed('AdSlot metrics');\n     console.log('number of slots', metric.numberAdSlots);\n     console.log('number of empty slots', metric.numberEmptyAdSlots);\n     console.groupEnd();\n     break;\n   }\n   case 'adSlot': {\n     console.groupCollapsed(`AdSlot: ${metric.adUnitName}`);\n     console.log('advertiser id', metric.advertiserId);\n     console.log('order id', metric.campaignId);\n     console.log('line item id', metric.lineItemId);\n     console.log('render start at', Math.round(metric.rendered.startTime));\n     console.log('rendering duration', Math.round(metric.rendering.duration));\n     console.log('loaded at', Math.round(metric.loaded.startTime + metric.loaded.duration));\n     console.groupEnd();\n     break;\n   }\n}\n"})}),"\n",(0,i.jsx)(r.h4,{id:"type-declaration",children:"Type declaration"}),"\n",(0,i.jsxs)(r.p,{children:["\u25b8 (",(0,i.jsx)(r.code,{children:"metric"}),"): ",(0,i.jsx)(r.code,{children:"void"})]}),"\n",(0,i.jsx)(r.h5,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{style:{textAlign:"left"},children:"Name"}),(0,i.jsx)(r.th,{style:{textAlign:"left"},children:"Type"})]})}),(0,i.jsx)(r.tbody,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{style:{textAlign:"left"},children:(0,i.jsx)(r.code,{children:"metric"})}),(0,i.jsx)(r.td,{style:{textAlign:"left"},children:(0,i.jsx)(r.a,{href:"/moli-ad-tag/docs/api/namespaces/Moli.reporting#metric",children:(0,i.jsx)(r.code,{children:"Metric"})})})]})})]}),"\n",(0,i.jsx)(r.h5,{id:"returns",children:"Returns"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.code,{children:"void"})})]})}function p(e={}){const{wrapper:r}={...(0,t.a)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},11151:(e,r,n)=>{n.d(r,{Z:()=>l,a:()=>s});var i=n(67294);const t={},o=i.createContext(t);function s(e){const r=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(o.Provider,{value:r},e.children)}}}]);