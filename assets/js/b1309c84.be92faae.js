"use strict";(self.webpackChunkthe_publisher_ad_tag=self.webpackChunkthe_publisher_ad_tag||[]).push([[59413],{28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var t=i(96540);const a={},s=t.createContext(a);function r(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(s.Provider,{value:n},e.children)}},66708:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>c,frontMatter:()=>r,metadata:()=>t,toc:()=>g});const t=JSON.parse('{"id":"features/targeting","title":"Targeting","description":"Targeting allows you to pass key-value pairs to your ad server to help with ad selection and optimization. Moli provides several ways to set targeting values that will be sent with your ad requests.","source":"@site/docs/features/targeting.md","sourceDirName":"features","slug":"/features/targeting","permalink":"/moli-ad-tag/docs/features/targeting","draft":false,"unlisted":false,"editUrl":"https://github.com/highfivve/moli-ad-tag/docs/features/targeting.md","tags":[],"version":"current","frontMatter":{"title":"Targeting"},"sidebar":"docs","previous":{"title":"Consent (TCF2)","permalink":"/moli-ad-tag/docs/features/consent"},"next":{"title":"Labels","permalink":"/moli-ad-tag/docs/features/labels"}}');var a=i(74848),s=i(28453);const r={title:"Targeting"},l=void 0,o={},g=[{value:"Overview",id:"overview",level:2},{value:"Setting Targeting Values",id:"setting-targeting-values",level:2},{value:"Global Targeting",id:"global-targeting",level:3},{value:"Per-Page Targeting",id:"per-page-targeting",level:3},{value:"Ad Slot Specific Targeting",id:"ad-slot-specific-targeting",level:3},{value:"Targeting Configuration",id:"targeting-configuration",level:2},{value:"In MoliConfig",id:"in-moliconfig",level:3},{value:"Dynamic Targeting",id:"dynamic-targeting",level:3},{value:"Common Targeting Keys",id:"common-targeting-keys",level:2},{value:"Content Targeting",id:"content-targeting",level:3},{value:"User Targeting",id:"user-targeting",level:3},{value:"Page Targeting",id:"page-targeting",level:3},{value:"Custom Targeting",id:"custom-targeting",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Use Descriptive Keys",id:"use-descriptive-keys",level:3},{value:"Consistent Naming",id:"consistent-naming",level:3},{value:"Avoid Sensitive Data",id:"avoid-sensitive-data",level:3},{value:"Clear Values",id:"clear-values",level:3},{value:"Integration with Prebid",id:"integration-with-prebid",level:2},{value:"Debugging Targeting",id:"debugging-targeting",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Available Methods",id:"available-methods",level:3},{value:"Example Usage",id:"example-usage",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"Targeting allows you to pass key-value pairs to your ad server to help with ad selection and optimization. Moli provides several ways to set targeting values that will be sent with your ad requests."}),"\n",(0,a.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(n.p,{children:"Targeting key-values are used by ad servers and demand-side platforms (DSPs) to:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Match ads to specific audience segments"}),"\n",(0,a.jsx)(n.li,{children:"Optimize ad performance based on page context"}),"\n",(0,a.jsx)(n.li,{children:"Enable programmatic buying with specific criteria"}),"\n",(0,a.jsx)(n.li,{children:"Improve ad relevance and user experience"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"setting-targeting-values",children:"Setting Targeting Values"}),"\n",(0,a.jsx)(n.h3,{id:"global-targeting",children:"Global Targeting"}),"\n",(0,a.jsx)(n.p,{children:"Set targeting values that apply to all ad slots on the page:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Set targeting before requesting ads\nwindow.moli.setTargeting('key', 'value');\nwindow.moli.setTargeting('category', 'sports');\nwindow.moli.setTargeting('position', 'sidebar');\n\n// Request ads with targeting applied\nwindow.moli.requestAds();\n"})}),"\n",(0,a.jsx)(n.h3,{id:"per-page-targeting",children:"Per-Page Targeting"}),"\n",(0,a.jsx)(n.p,{children:"For single-page applications, set targeting values for each page:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Set page-specific targeting\nwindow.moli.setTargeting('page_type', 'article');\nwindow.moli.setTargeting('article_category', 'technology');\nwindow.moli.setTargeting('author', 'john_doe');\n\n// Request ads for the new page\nwindow.moli.requestAds();\n"})}),"\n",(0,a.jsx)(n.h3,{id:"ad-slot-specific-targeting",children:"Ad Slot Specific Targeting"}),"\n",(0,a.jsx)(n.p,{children:"Set targeting values for specific ad slots:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"const slot: Moli.AdSlot = {\n  domId: 'content_1',\n  adUnitPath: '/1234/content_1',\n  sizes: [[300, 250], [728, 90]],\n  position: 'in-page',\n  behaviour: { loaded: 'eager' },\n  \n  // highlight-start\n  gpt: {\n    targeting: {\n      'slot_position': 'content',\n      'content_type': 'article'\n    }\n  }\n  // highlight-end\n};\n"})}),"\n",(0,a.jsx)(n.h2,{id:"targeting-configuration",children:"Targeting Configuration"}),"\n",(0,a.jsx)(n.h3,{id:"in-moliconfig",children:"In MoliConfig"}),"\n",(0,a.jsx)(n.p,{children:"You can set default targeting values in your configuration:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"const moliConfig: Moli.MoliConfig = {\n  slots: [ /* ... */ ],\n  // highlight-start\n  gpt: {\n    targeting: {\n      'site_section': 'news',\n      'content_language': 'en'\n    }\n  }\n  // highlight-end\n};\n"})}),"\n",(0,a.jsx)(n.h3,{id:"dynamic-targeting",children:"Dynamic Targeting"}),"\n",(0,a.jsx)(n.p,{children:"Use functions to set targeting values dynamically:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"const slot: Moli.AdSlot = {\n  domId: 'content_1',\n  adUnitPath: '/1234/content_1',\n  sizes: [[300, 250]],\n  position: 'in-page',\n  behaviour: { loaded: 'eager' },\n  \n  // highlight-start\n  gpt: {\n    targeting: () => ({\n      'page_url': window.location.href,\n      'user_agent': navigator.userAgent,\n      'timestamp': Date.now().toString()\n    })\n  }\n  // highlight-end\n};\n"})}),"\n",(0,a.jsx)(n.h2,{id:"common-targeting-keys",children:"Common Targeting Keys"}),"\n",(0,a.jsx)(n.h3,{id:"content-targeting",children:"Content Targeting"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"content_category"})," - Article or page category"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"content_type"})," - Type of content (article, video, gallery)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"content_author"})," - Content author"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"content_tags"})," - Content tags or keywords"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"user-targeting",children:"User Targeting"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"user_type"})," - User segment (new, returning, premium)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"user_location"})," - Geographic location"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"user_device"})," - Device type (mobile, desktop, tablet)"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"page-targeting",children:"Page Targeting"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"page_type"})," - Page type (home, article, category)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"page_section"})," - Site section"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"page_position"})," - Ad position on page"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"custom-targeting",children:"Custom Targeting"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"custom_key"})," - Any custom key-value pair"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"campaign_id"})," - Campaign identifier"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"experiment_group"})," - A/B test group"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsx)(n.h3,{id:"use-descriptive-keys",children:"Use Descriptive Keys"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Good\nwindow.moli.setTargeting('article_category', 'technology');\n\n// Avoid\nwindow.moli.setTargeting('cat', 'tech');\n"})}),"\n",(0,a.jsx)(n.h3,{id:"consistent-naming",children:"Consistent Naming"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Use consistent naming across your site\nwindow.moli.setTargeting('content_category', 'sports'); // \u2705\nwindow.moli.setTargeting('category', 'sports');        // \u274c Inconsistent\n"})}),"\n",(0,a.jsx)(n.h3,{id:"avoid-sensitive-data",children:"Avoid Sensitive Data"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Don't include personally identifiable information\nwindow.moli.setTargeting('user_id', '12345');          // \u274c Avoid\nwindow.moli.setTargeting('user_segment', 'premium');   // \u2705 Safe\n"})}),"\n",(0,a.jsx)(n.h3,{id:"clear-values",children:"Clear Values"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Use clear, standardized values\nwindow.moli.setTargeting('device_type', 'mobile');     // \u2705 Clear\nwindow.moli.setTargeting('device_type', 'm');          // \u274c Unclear\n"})}),"\n",(0,a.jsx)(n.h2,{id:"integration-with-prebid",children:"Integration with Prebid"}),"\n",(0,a.jsx)(n.p,{children:"When using Prebid.js, targeting values can be passed to bidders:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"const slot: Moli.AdSlot = {\n  domId: 'content_1',\n  adUnitPath: '/1234/content_1',\n  sizes: [[300, 250]],\n  position: 'in-page',\n  behaviour: { loaded: 'eager' },\n  \n  prebid: {\n    adUnit: {\n      mediaTypes: {\n        banner: { sizes: [[300, 250]] }\n      },\n      bids: [\n        {\n          bidder: 'appNexus',\n          params: {\n            placementId: 123,\n            // highlight-start\n            keywords: {\n              category: 'sports',\n              position: 'content'\n            }\n            // highlight-end\n          }\n        }\n      ]\n    }\n  }\n};\n"})}),"\n",(0,a.jsx)(n.h2,{id:"debugging-targeting",children:"Debugging Targeting"}),"\n",(0,a.jsx)(n.p,{children:"Use the debugging console to verify targeting values:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Enable debugging\nlocalStorage.setItem('moliDebug', 'true');\n\n// Check targeting in browser console\n"})}),"\n",(0,a.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,a.jsx)(n.h3,{id:"available-methods",children:"Available Methods"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"setTargeting(key, value)"})," - Set a targeting key-value pair for all ad slots"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["For detailed API documentation, see the ",(0,a.jsx)(n.a,{href:"/api/types/moliRuntime/namespaces/MoliRuntime/interfaces/MoliTag",children:"MoliTag API reference"}),"."]}),"\n",(0,a.jsx)(n.h3,{id:"example-usage",children:"Example Usage"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Set targeting\nwindow.moli.setTargeting('category', 'sports');\n\n"})})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);